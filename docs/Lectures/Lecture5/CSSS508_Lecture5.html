<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>csss508_lecture5</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="http://vsass.github.io" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">CS&amp;SS 508</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../syllabus.html" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../Lectures/lectures.html" rel="" target="">
 <span class="menu-text">Lectures</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../Homework/homework.html" rel="" target="">
 <span class="menu-text">Homework</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="CSSS508_Lecture5.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">



<section id="title-slide" class="level2" data-menu-title="Importing, Exporting, and Cleaning Data" data-background="#1e4655" data-background-image="../../images/csss-logo.png" data-background-position="center top 5%" data-background-size="50%">
<h2 data-menu-title="Importing, Exporting, and Cleaning Data" data-background="#1e4655" data-background-image="../../images/csss-logo.png" data-background-position="center top 5%" data-background-size="50%" class="anchored" data-anchor-id="title-slide"></h2>
<p><span class="custom-title">Importing, Exporting, and Cleaning Data</span></p>
<p><span class="custom-subtitle">CS&amp;SS 508 • Lecture 5</span></p>
<p><span class="custom-subtitle2">31 October 2023</span></p>
<p><span class="custom-subtitle3">Victoria Sass</span></p>
</section>
<section id="roadmap" class="level1 section-title" data-background-color="#99a486">
<h1 class="section-title" data-background-color="#99a486">Roadmap</h1>
<hr>
<div class="columns">
<div class="column" style="width:50%;">
<p><br></p>
<section id="last-time-we-learned" class="level3">
<h3 class="anchored" data-anchor-id="last-time-we-learned">Last time, we learned:</h3>
<ul>
<li>Logical Operators</li>
<li>Using <code>dplyr</code> to:
<ul>
<li>Subset data</li>
<li>Modify data</li>
<li>Summarize data</li>
<li>Merge data</li>
</ul></li>
</ul>
</section>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="fragment">
<section id="today-we-will-cover" class="level3">
<h3 class="anchored" data-anchor-id="today-we-will-cover">Today, we will cover:</h3>
<ul>
<li>Importing and Exporting Data</li>
<li>Tidying and Reshaping Data</li>
<li>Wrangling Date/Date-Time Data</li>
<li>Working with Factors</li>
</ul>
</section>
</div>
</div>
</div>
</section>
<section id="importing-and-exporting-data" class="level1 section-title" data-background-color="#99a486">
<h1 class="section-title" data-background-color="#99a486">Importing and Exporting Data</h1>
<section id="data-packages" class="level2">
<h2 class="anchored" data-anchor-id="data-packages">Data Packages</h2>
<p>R has a <em>big</em> user base. If you are working with a popular data source, it will often have a devoted R package on <em>CRAN</em> or <em>Github</em>.</p>
<p>. . .</p>
<p>Examples:</p>
<ul>
<li><a href="https://vincentarelbundock.github.io/WDI/"><code>WDI</code></a>: World Development Indicators (World Bank)</li>
<li><a href="https://walker-data.com/tidycensus/"><code>tidycensus</code></a>: Census and American Community Survey</li>
<li><a href="https://walker-data.com/tidycensus/"><code>quantmod</code></a>: financial data from Yahoo, FRED, Google</li>
<li><a href="https://kjhealy.github.io/gssr/"><code>gssr</code></a>: The General Social Survey Cumulative Data (1972-2021)</li>
<li><a href="https://github.com/floswald/psidR"><code>psidR</code></a>: Panel Study of Income Dynamics (basic &amp; public datasets)</li>
</ul>
<p>. . .</p>
<p>If you have an actual data file, you’ll have to import it yourself…</p>
</section>
<section id="delimited-text-files" class="level2">
<h2 class="anchored" data-anchor-id="delimited-text-files">Delimited Text Files</h2>
<p>Besides a package, it’s easiest when data is stored in a text file. The most commonly encountered delimitd file is a <strong>.csv</strong>.</p>
<p>. . .</p>
<p>A comma-separated values (.csv) file looks like the following:</p>
<pre><code>"Subject","Depression","Sex","Week","HamD","Imipramine"
101,"Non-endogenous","Second",0,26,NA
101,"Non-endogenous","Second",1,22,NA
101,"Non-endogenous","Second",2,18,4.04305
101,"Non-endogenous","Second",3,7,3.93183
101,"Non-endogenous","Second",4,4,4.33073
101,"Non-endogenous","Second",5,3,4.36945
103,"Non-endogenous","First",0,33,NA
103,"Non-endogenous","First",1,24,NA
103,"Non-endogenous","First",2,15,2.77259</code></pre>
</section>
</section>
<section id="section" class="level1 section-title page-columns page-full" data-menu-title="`readr``" data-background-image="images/readr.png" data-background-size="contain" data-background-position="center" data-background-color="#1e4655">
<h1 class="section-title" data-menu-title="`readr``" data-background-image="images/readr.png" data-background-size="contain" data-background-position="center" data-background-color="#1e4655"></h1>
<section id="readr" class="level2">
<h2 class="anchored" data-anchor-id="readr"><code>readr</code></h2>
<p>R has some built-in functions for importing data, such as <code>read.table()</code> and <code>read.csv()</code>.</p>
<p>. . .</p>
<p>The <code>readr</code> package provides similar functions, like <code>read_csv()</code>, that have slightly better features:</p>
<div class="incremental">
<ul class="incremental">
<li>Faster!</li>
<li>Better defaults (e.g.&nbsp;doesn’t automatically convert characters to factors)</li>
<li>A <em>bit</em> smarter about dates and times</li>
<li>Loading progress bars for large files</li>
</ul>
</div>
<p>. . .</p>
<p><code>readr</code> is one of the core <code>tidyverse</code> packages so loading <code>tidyverse</code> will load it too:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<p>Alternatively, you can just load <code>readr</code> like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="readr-importing-example" class="level2">
<h2 class="anchored" data-anchor-id="readr-importing-example"><code>readr</code> Importing Example</h2>
<p>Let’s import some data about song ranks on the Billboard Hot 100 in 2000:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>billboard_2000_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"data/billboard.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<p>How do we know it loaded?</p>
<p>. . .</p>
<p>Let’s look at it!</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(billboard_2000_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 317
Columns: 81
$ year         &lt;dbl&gt; 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 200…
$ artist       &lt;chr&gt; "2 Pac", "2Ge+her", "3 Doors Down", "3 Doors Down", "504 …
$ track        &lt;chr&gt; "Baby Don't Cry (Keep...", "The Hardest Part Of ...", "Kr…
$ time         &lt;time&gt; 04:22:00, 03:15:00, 03:53:00, 04:24:00, 03:35:00, 03:24:…
$ date.entered &lt;date&gt; 2000-02-26, 2000-09-02, 2000-04-08, 2000-10-21, 2000-04-…
$ wk1          &lt;dbl&gt; 87, 91, 81, 76, 57, 51, 97, 84, 59, 76, 84, 57, 50, 71, 7…
$ wk2          &lt;dbl&gt; 82, 87, 70, 76, 34, 39, 97, 62, 53, 76, 84, 47, 39, 51, 6…
$ wk3          &lt;dbl&gt; 72, 92, 68, 72, 25, 34, 96, 51, 38, 74, 75, 45, 30, 28, 5…
$ wk4          &lt;dbl&gt; 77, NA, 67, 69, 17, 26, 95, 41, 28, 69, 73, 29, 28, 18, 4…
$ wk5          &lt;dbl&gt; 87, NA, 66, 67, 17, 26, 100, 38, 21, 68, 73, 23, 21, 13, …
$ wk6          &lt;dbl&gt; 94, NA, 57, 65, 31, 19, NA, 35, 18, 67, 69, 18, 19, 13, 3…
$ wk7          &lt;dbl&gt; 99, NA, 54, 55, 36, 2, NA, 35, 16, 61, 68, 11, 20, 11, 34…
$ wk8          &lt;dbl&gt; NA, NA, 53, 59, 49, 2, NA, 38, 14, 58, 65, 9, 17, 1, 29, …
$ wk9          &lt;dbl&gt; NA, NA, 51, 62, 53, 3, NA, 38, 12, 57, 73, 9, 17, 1, 27, …
$ wk10         &lt;dbl&gt; NA, NA, 51, 61, 57, 6, NA, 36, 10, 59, 83, 11, 17, 2, 30,…
$ wk11         &lt;dbl&gt; NA, NA, 51, 61, 64, 7, NA, 37, 9, 66, 92, 1, 17, 2, 36, N…
$ wk12         &lt;dbl&gt; NA, NA, 51, 59, 70, 22, NA, 37, 8, 68, NA, 1, 3, 3, 37, N…
$ wk13         &lt;dbl&gt; NA, NA, 47, 61, 75, 29, NA, 38, 6, 61, NA, 1, 3, 3, 39, N…
$ wk14         &lt;dbl&gt; NA, NA, 44, 66, 76, 36, NA, 49, 1, 67, NA, 1, 7, 4, 49, N…
$ wk15         &lt;dbl&gt; NA, NA, 38, 72, 78, 47, NA, 61, 2, 59, NA, 4, 10, 12, 57,…
$ wk16         &lt;dbl&gt; NA, NA, 28, 76, 85, 67, NA, 63, 2, 63, NA, 8, 17, 11, 63,…
$ wk17         &lt;dbl&gt; NA, NA, 22, 75, 92, 66, NA, 62, 2, 67, NA, 12, 25, 13, 65…
$ wk18         &lt;dbl&gt; NA, NA, 18, 67, 96, 84, NA, 67, 2, 71, NA, 22, 29, 15, 68…
$ wk19         &lt;dbl&gt; NA, NA, 18, 73, NA, 93, NA, 83, 3, 79, NA, 23, 29, 18, 79…
$ wk20         &lt;dbl&gt; NA, NA, 14, 70, NA, 94, NA, 86, 4, 89, NA, 43, 40, 20, 86…
$ wk21         &lt;dbl&gt; NA, NA, 12, NA, NA, NA, NA, NA, 5, NA, NA, 44, 43, 30, NA…
$ wk22         &lt;dbl&gt; NA, NA, 7, NA, NA, NA, NA, NA, 5, NA, NA, NA, 50, 40, NA,…
$ wk23         &lt;dbl&gt; NA, NA, 6, NA, NA, NA, NA, NA, 6, NA, NA, NA, NA, 39, NA,…
$ wk24         &lt;dbl&gt; NA, NA, 6, NA, NA, NA, NA, NA, 9, NA, NA, NA, NA, 44, NA,…
$ wk25         &lt;dbl&gt; NA, NA, 6, NA, NA, NA, NA, NA, 13, NA, NA, NA, NA, NA, NA…
$ wk26         &lt;dbl&gt; NA, NA, 5, NA, NA, NA, NA, NA, 14, NA, NA, NA, NA, NA, NA…
$ wk27         &lt;dbl&gt; NA, NA, 5, NA, NA, NA, NA, NA, 16, NA, NA, NA, NA, NA, NA…
$ wk28         &lt;dbl&gt; NA, NA, 4, NA, NA, NA, NA, NA, 23, NA, NA, NA, NA, NA, NA…
$ wk29         &lt;dbl&gt; NA, NA, 4, NA, NA, NA, NA, NA, 22, NA, NA, NA, NA, NA, NA…
$ wk30         &lt;dbl&gt; NA, NA, 4, NA, NA, NA, NA, NA, 33, NA, NA, NA, NA, NA, NA…
$ wk31         &lt;dbl&gt; NA, NA, 4, NA, NA, NA, NA, NA, 36, NA, NA, NA, NA, NA, NA…
$ wk32         &lt;dbl&gt; NA, NA, 3, NA, NA, NA, NA, NA, 43, NA, NA, NA, NA, NA, NA…
$ wk33         &lt;dbl&gt; NA, NA, 3, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ wk34         &lt;dbl&gt; NA, NA, 3, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ wk35         &lt;dbl&gt; NA, NA, 4, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ wk36         &lt;dbl&gt; NA, NA, 5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ wk37         &lt;dbl&gt; NA, NA, 5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ wk38         &lt;dbl&gt; NA, NA, 9, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ wk39         &lt;dbl&gt; NA, NA, 9, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ wk40         &lt;dbl&gt; NA, NA, 15, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk41         &lt;dbl&gt; NA, NA, 14, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk42         &lt;dbl&gt; NA, NA, 13, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk43         &lt;dbl&gt; NA, NA, 14, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk44         &lt;dbl&gt; NA, NA, 16, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk45         &lt;dbl&gt; NA, NA, 17, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk46         &lt;dbl&gt; NA, NA, 21, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk47         &lt;dbl&gt; NA, NA, 22, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk48         &lt;dbl&gt; NA, NA, 24, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk49         &lt;dbl&gt; NA, NA, 28, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk50         &lt;dbl&gt; NA, NA, 33, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk51         &lt;dbl&gt; NA, NA, 42, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk52         &lt;dbl&gt; NA, NA, 42, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk53         &lt;dbl&gt; NA, NA, 49, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk54         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk55         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk56         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk57         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk58         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk59         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk60         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk61         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk62         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk63         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk64         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk65         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk66         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk67         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk68         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk69         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk70         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk71         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk72         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk73         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk74         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk75         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk76         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</code></pre>
</div>
</div>
</section>
<section id="alternate-solution" class="level2">
<h2 class="anchored" data-anchor-id="alternate-solution">Alternate Solution</h2>
<p>When you import data from an external file you’ll also see it in the Global Environment tab in the upper-right pane of RStudio:</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment">
<p>You can also import the data manually!</p>
<p>In the upper right-hand pane of RStudio (make sure you’re in the Environment tab), select:</p>
<p><code>Import Dataset &gt; From Text (readr)</code> and browse to the file on your computer<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
</div>
<div class="fragment">
<p><strong>Once you’ve imported the data, you can <code>copy/paste</code> the import code from the console into your file!!</strong></p>
<p>This makes the process <em>reproducible!</em></p>
</div>
</div><div class="column" style="width:50%;">
<p><img src="images/data_global_env.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="manual-data-import" class="level2">
<h2 class="anchored" data-anchor-id="manual-data-import">Manual Data Import</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/data_import_manual.png" class="img-fluid figure-img"></p>
</figure>
</div>
</section>
<section id="specifying-nas" class="level2">
<h2 class="anchored" data-anchor-id="specifying-nas">Specifying <code>NA</code>s</h2>
<p><code>NA</code>s are technically logical (boolean) variables<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> that indicate a missing value.</p>
<p>. . .</p>
<p>Sometimes a particular dataset or file read from a different software will code <code>NA</code>s differently than <code>R</code>. If that’s the case, you can add additional specifications to <code>read_csv</code> for what to read in as <code>NA</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>billboard_2000_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"data/billboard.csv"</span>, </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                               <span class="at">na =</span> <span class="fu">c</span>(<span class="st">"N/A"</span>, <span class="st">"999"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="skipping-lines" class="level2">
<h2 class="anchored" data-anchor-id="skipping-lines">Skipping lines</h2>
<p>Depending on how the data were input, there may be several lines that precede the beginning of the data table you’re interested in importing. You can skip these lines of metadata with the <code>skip</code> argument:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>billboard_2000_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"data/billboard.csv"</span>, </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>                               <span class="at">skip =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="variable-names" class="level2">
<h2 class="anchored" data-anchor-id="variable-names">Variable names</h2>
<p><code>read_csv</code> will automatically take the first row as column names. If you want to rename them you can save yourself some time recoding later on if you specify your preferred variable names upfront with the <code>col_names</code> argument.</p>
<p>. . .</p>
<p>It takes a character vector to be used as column names (in their order of appearance).</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-8"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-8-1"><a href="#annotated-cell-8-1" aria-hidden="true" tabindex="-1"></a>billboard_2000_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"data/billboard.csv"</span>, </span>
<span id="annotated-cell-8-2"><a href="#annotated-cell-8-2" aria-hidden="true" tabindex="-1"></a>                               <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"artist"</span>, <span class="st">"track"</span>, <span class="st">"time"</span>, <span class="st">"date_entered"</span>, </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-8" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-8-3" class="code-annotation-target"><a href="#annotated-cell-8-3" aria-hidden="true" tabindex="-1"></a>                                             <span class="fu">paste</span>(<span class="st">"wk"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">76</span>, <span class="at">sep =</span> <span class="st">"_"</span>)))</span>
<span id="annotated-cell-8-4"><a href="#annotated-cell-8-4" aria-hidden="true" tabindex="-1"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-8" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-8-5" class="code-annotation-target"><a href="#annotated-cell-8-5" aria-hidden="true" tabindex="-1"></a>billboard_renamed <span class="sc">|&gt;</span>  <span class="fu">names</span>() <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">10</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-8" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="3" data-code-cell="annotated-cell-8"><code>paste</code> “pastes” together the first argument to the second argument (separated by whatever is specified in the <code>sep</code> argument) as character strings. Since the first argument here is a singular value, it is repeated for the entire length of the vector in the second argument. The first several values of <code>paste("wk", 1:76, sep = "_")</code> are: wk_1, wk_2, wk_3, wk_4, wk_5, wk_6</span>
</dd>
<dt data-target-cell="annotated-cell-8" data-target-annotation="2">2</dt>
<dd>
<span data-code-annotation="2" data-code-lines="5" data-code-cell="annotated-cell-8">Our first official usage of the pipe! <code>names</code> here returns the column names of our data frame. . . .</span>
</dd>
</dl>
</div>
</div>
<p>If you don’t have any variable names you can specify that instead.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>billboard_2000_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"data/billboard.csv"</span>, </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>                               <span class="at">col_names =</span> <span class="cn">FALSE</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="snake-case" class="level2">
<h2 class="anchored" data-anchor-id="snake-case">Snake Case</h2>
<p>If you simply want to change your variables to snake case (all lower case; words separated by <code>_</code>), you can use the function <code>clean_names()</code> from the <code>janitor</code> package which replaces other punctuation separators with <code>_</code>.</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-10"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-10-1"><a href="#annotated-cell-10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Download pacakge first</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-10-2" class="code-annotation-target"><a href="#annotated-cell-10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("janitor")</span></span>
<span id="annotated-cell-10-3"><a href="#annotated-cell-10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-10-4"><a href="#annotated-cell-10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new object for renamed data</span></span>
<span id="annotated-cell-10-5"><a href="#annotated-cell-10-5" aria-hidden="true" tabindex="-1"></a>billboard_renamed <span class="ot">&lt;-</span> billboard_2000_raw <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-10-6" class="code-annotation-target"><a href="#annotated-cell-10-6" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>(<span class="at">numerals =</span> <span class="st">"right"</span>)</span>
<span id="annotated-cell-10-7"><a href="#annotated-cell-10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-10-8"><a href="#annotated-cell-10-8" aria-hidden="true" tabindex="-1"></a>billboard_renamed <span class="sc">|&gt;</span>  <span class="fu">names</span>() <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">10</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-10" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="2" data-code-cell="annotated-cell-10">Run in the console first.</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="2">2</dt>
<dd>
<span data-code-annotation="2" data-code-lines="6" data-code-cell="annotated-cell-10">You can call a function without loading its package by specifying its package name followed by <code>::</code> before it; <br> The <code>numerals</code> argument specifies if you additionally want to put a separator before a number.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "year"         "artist"       "track"        "time"         "date_entered"
 [6] "wk_1"         "wk_2"         "wk_3"         "wk_4"         "wk_5"        </code></pre>
</div>
</div>
</section>
<section id="other-data-file-types-with-readr" class="level2">
<h2 class="anchored" data-anchor-id="other-data-file-types-with-readr">Other Data File Types with <code>readr</code></h2>
<p>The other functions in <code>readr</code> employ as similar approach to <code>read_csv</code> so the trick is just knowing which to use for what data type.</p>
<div class="incremental">
<ul class="incremental">
<li><code>read_csv2</code> is separated by semicolons (instead of commas)</li>
<li><code>read_tsv</code> is separated by tabs</li>
<li><code>read_delim</code> guesses the delimiter</li>
<li><code>read_fwf</code> reads in fixed-width-files</li>
<li><code>read_table</code> is a variation of <code>fwf</code> where columns are separated by white space</li>
<li><code>read_log</code> reads in Apache-style log files</li>
</ul>
</div>
</section>
<section id="other-packages-to-read-in-data" class="level2">
<h2 class="anchored" data-anchor-id="other-packages-to-read-in-data">Other Packages to Read in Data</h2>
<p>There are a range of other ways, besides delimited files, that data are stored.</p>
<p>The following packages are part of the extended <code>tidyverse</code> and therefore operate with similar syntax and logic as <code>readr</code>.</p>
</section>
<section id="other-packages-to-read-in-data-1" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="other-packages-to-read-in-data-1">Other Packages to Read in Data</h2>
<p>There are a range of other ways, besides delimited files, that data are stored.</p>
<p>The following packages are part of the extended <code>tidyverse</code> and therefore operate with similar syntax and logic as <code>readr</code>.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img src="images/readxl.png" class="absolute img-fluid" data-top="185" data-left="135"></p>
</div><div class="column" style="width:50%;">
<ul>
<li>For Excel files (<code>.xls</code> or <code>.xlsx</code>), use package <a href="https://readxl.tidyverse.org/"><code>readxl</code></a><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></li>
</ul>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Note: For Excel files and Googlesheets You <strong>won’t</strong> keep text formatting, color, comments, or merged cells. See the <a href="https://ycphs.github.io/openxlsx/"><code>openxlsx</code></a> package for those capabilities. Also, <a href="https://github.com/nacnudus/tidyxl"><code>tidyxl</code></a> can help import non-tabular data from Excel.</p>
</div></div></section>
<section id="other-packages-to-read-in-data-2" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="other-packages-to-read-in-data-2">Other Packages to Read in Data</h2>
<p>There are a range of other ways, besides delimited files, that data are stored.</p>
<p>The following packages are part of the extended <code>tidyverse</code> and therefore operate with similar syntax and logic as <code>readr</code>.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img src="images/googlesheets4.png" class="absolute img-fluid" data-top="185" data-left="135"></p>
</div><div class="column" style="width:50%;">
<ul>
<li>For Excel files (<code>.xls</code> or <code>.xlsx</code>), use package <a href="https://readxl.tidyverse.org/"><code>readxl</code></a><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></li>
<li>For Google Docs Spreadsheets, use package <a href="https://googlesheets4.tidyverse.org/"><code>googlesheets4</code></a><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></li>
</ul>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Note: For Excel files and Googlesheets You <strong>won’t</strong> keep text formatting, color, comments, or merged cells. See the <a href="https://ycphs.github.io/openxlsx/"><code>openxlsx</code></a> package for those capabilities. Also, <a href="https://github.com/nacnudus/tidyxl"><code>tidyxl</code></a> can help import non-tabular data from Excel.</p>
</div></div></section>
<section id="other-packages-to-read-in-data-3" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="other-packages-to-read-in-data-3">Other Packages to Read in Data</h2>
<p>There are a range of other ways, besides delimited files, that data are stored.</p>
<p>The following packages are part of the extended <code>tidyverse</code> and therefore operate with similar syntax and logic as <code>readr</code>.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img src="images/haven.png" class="absolute img-fluid" data-top="185" data-left="135"></p>
</div><div class="column" style="width:50%;">
<ul>
<li>For Excel files (<code>.xls</code> or <code>.xlsx</code>), use package <a href="https://readxl.tidyverse.org/"><code>readxl</code></a><a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></li>
<li>For Google Docs Spreadsheets, use package <a href="https://googlesheets4.tidyverse.org/"><code>googlesheets4</code></a><a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></li>
<li>For Stata, SPSS, and SAS files, use package <a href="https://haven.tidyverse.org/"><code>haven</code></a><a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></li>
</ul>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Note: For Excel files and Googlesheets You <strong>won’t</strong> keep text formatting, color, comments, or merged cells. See the <a href="https://ycphs.github.io/openxlsx/"><code>openxlsx</code></a> package for those capabilities. Also, <a href="https://github.com/nacnudus/tidyxl"><code>tidyxl</code></a> can help import non-tabular data from Excel.</p>
</div></div></section>
<section id="how-does-readr-parse-different-data-types" class="level2">
<h2 class="anchored" data-anchor-id="how-does-readr-parse-different-data-types">How does <code>readr</code> parse different data types?</h2>
<p>For each column in a data frame, <code>readr</code> functions pull the first 1000 rows and checks:</p>
<div class="cell" data-fig-width="11" data-fig-height="5.5" data-layout-align="center">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    id1((Variable))==&gt;A(["1. Does it contain only F, T, FALSE, TRUE, or NA (ignoring case)?"])==&gt;id2{{Logical}}
    id1((Variable))==&gt;B(["2. Does it contain only numbers (e.g., 1, -4.5, 5e6, Inf?)"])==&gt;id3{{Number}}
    id1((Variable))==&gt;C(["3. Does it match the ISO8601 standard?"])==&gt;id4{{Date/Date-time}}
    id1((Variable))==&gt;D(["4. None of the above"])==&gt;id5{{String}}
    style id1 fill:#1e4655,color:#c7cdac,stroke:#c7cdac
    style id2 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style id3 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style id4 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style id5 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style A fill:#FFFFFF,color:#000000,stroke:#000000
    style B fill:#FFFFFF,color:#000000,stroke:#000000
    style C fill:#FFFFFF,color:#000000,stroke:#000000
    style D fill:#FFFFFF,color:#000000,stroke:#000000

</pre>
</div>
</div>
</div>
</div>
</section>
<section id="how-does-readr-parse-different-data-types-1" class="level2">
<h2 class="anchored" data-anchor-id="how-does-readr-parse-different-data-types-1">How does <code>readr</code> parse different data types?</h2>
<p>For each column in a data frame, <code>readr</code> functions pull the first 1000 rows and checks:</p>
<div class="cell" data-fig-width="11" data-fig-height="5.5" data-layout-align="center">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    id1((Variable))==&gt;A(["1. Does it contain only F, T, FALSE, TRUE, or NA (ignoring case)?"])==&gt;id2{{Logical}}
    id1((Variable))==&gt;B(["2. Does it contain only numbers (e.g., 1, -4.5, 5e6, Inf?)"])==&gt;id3{{Number}}
    id1((Variable))==&gt;C(["3. Does it match the ISO8601 standard?"])==&gt;id4{{Date/Date-time}}
    id1((Variable))==&gt;D(["4. None of the above"])==&gt;id5{{String}}
    style id1 fill:#1e4655,color:#c7cdac,stroke:#c7cdac
    style id2 fill:#1e4655,color:#c7cdac,stroke:#c7cdac
    style id3 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style id4 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style id5 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style A fill:#ffa07a,color:#000000,stroke:#000000
    style B fill:#FFFFFF,color:#000000,stroke:#000000
    style C fill:#FFFFFF,color:#000000,stroke:#000000
    style D fill:#FFFFFF,color:#000000,stroke:#000000

</pre>
</div>
</div>
</div>
</div>
</section>
<section id="how-does-readr-parse-different-data-types-2" class="level2">
<h2 class="anchored" data-anchor-id="how-does-readr-parse-different-data-types-2">How does <code>readr</code> parse different data types?</h2>
<p>For each column in a data frame, <code>readr</code> functions pull the first 1000 rows and checks:</p>
<div class="cell" data-fig-width="11" data-fig-height="5.5" data-layout-align="center">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    id1((Variable))==&gt;A(["1. Does it contain only F, T, FALSE, TRUE, or NA (ignoring case)?"])==&gt;id2{{Logical}}
    id1((Variable))==&gt;B(["2. Does it contain only numbers (e.g., 1, -4.5, 5e6, Inf?)"])==&gt;id3{{Number}}
    id1((Variable))==&gt;C(["3. Does it match the ISO8601 standard?"])==&gt;id4{{Date/Date-time}}
    id1((Variable))==&gt;D(["4. None of the above"])==&gt;id5{{String}}
    style id1 fill:#1e4655,color:#c7cdac,stroke:#c7cdac
    style id2 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style id3 fill:#1e4655,color:#c7cdac,stroke:#c7cdac
    style id4 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style id5 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style A fill:#FFFFFF,color:#000000,stroke:#000000
    style B fill:#ffa07a,color:#000000,stroke:#000000
    style C fill:#FFFFFF,color:#000000,stroke:#000000
    style D fill:#FFFFFF,color:#000000,stroke:#000000

</pre>
</div>
</div>
</div>
</div>
</section>
<section id="how-does-readr-parse-different-data-types-3" class="level2">
<h2 class="anchored" data-anchor-id="how-does-readr-parse-different-data-types-3">How does <code>readr</code> parse different data types?</h2>
<p>For each column in a data frame, <code>readr</code> functions pull the first 1000 rows and checks:</p>
<div class="cell" data-fig-width="11" data-fig-height="5.5" data-layout-align="center">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    id1((Variable))==&gt;A(["1. Does it contain only F, T, FALSE, TRUE, or NA (ignoring case)?"])==&gt;id2{{Logical}}
    id1((Variable))==&gt;B(["2. Does it contain only numbers (e.g., 1, -4.5, 5e6, Inf?)"])==&gt;id3{{Number}}
    id1((Variable))==&gt;C(["3. Does it match the ISO8601 standard?"])==&gt;id4{{Date/Date-time}}
    id1((Variable))==&gt;D(["4. None of the above"])==&gt;id5{{String}}
    style id1 fill:#1e4655,color:#c7cdac,stroke:#c7cdac
    style id2 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style id3 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style id4 fill:#1e4655,color:#c7cdac,stroke:#c7cdac
    style id5 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style A fill:#FFFFFF,color:#000000,stroke:#000000
    style B fill:#FFFFFF,color:#000000,stroke:#000000
    style C fill:#ffa07a,color:#000000,stroke:#000000
    style D fill:#FFFFFF,color:#000000,stroke:#000000

</pre>
</div>
</div>
</div>
</div>
</section>
<section id="how-does-readr-parse-different-data-types-4" class="level2">
<h2 class="anchored" data-anchor-id="how-does-readr-parse-different-data-types-4">How does <code>readr</code> parse different data types?</h2>
<p>For each column in a data frame, <code>readr</code> functions pull the first 1000 rows and checks:</p>
<div class="cell" data-fig-width="11" data-fig-height="5.5" data-layout-align="center">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    id1((Variable))==&gt;A(["1. Does it contain only F, T, FALSE, TRUE, or NA (ignoring case)?"])==&gt;id2{{Logical}}
    id1((Variable))==&gt;B(["2. Does it contain only numbers (e.g., 1, -4.5, 5e6, Inf?)"])==&gt;id3{{Number}}
    id1((Variable))==&gt;C(["3. Does it match the ISO8601 standard?"])==&gt;id4{{Date/Date-time}}
    id1((Variable))==&gt;D(["4. None of the above"])==&gt;id5{{String}}
    style id1 fill:#1e4655,color:#c7cdac,stroke:#c7cdac
    style id2 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style id3 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style id4 fill:#c7cdac,color:#1e4655,stroke:#1e4655
    style id5 fill:#1e4655,color:#c7cdac,stroke:#c7cdac
    style A fill:#FFFFFF,color:#000000,stroke:#000000
    style B fill:#FFFFFF,color:#000000,stroke:#000000
    style C fill:#FFFFFF,color:#000000,stroke:#000000
    style D fill:#ffa07a,color:#000000,stroke:#000000

</pre>
</div>
</div>
</div>
</div>
</section>
<section id="most-common-issue-with-reading-in-data" class="level2">
<h2 class="anchored" data-anchor-id="most-common-issue-with-reading-in-data">Most Common Issue with Reading in Data</h2>
<p>The most common problem that occurs when reading in data is having mixed data. Most often, given the heuristic provided in the last slide, will parse a variable as a character string to preserve whatever it contains.</p>
<p>. . .</p>
<p>Let’s actually look at how the billboard data was read in:</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(billboard_2000_raw) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 317
Columns: 81
$ year         &lt;dbl&gt; 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 200…
$ artist       &lt;chr&gt; "2 Pac", "2Ge+her", "3 Doors Down", "3 Doors Down", "504 …
$ track        &lt;chr&gt; "Baby Don't Cry (Keep...", "The Hardest Part Of ...", "Kr…
$ time         &lt;time&gt; 04:22:00, 03:15:00, 03:53:00, 04:24:00, 03:35:00, 03:24:…
$ date.entered &lt;date&gt; 2000-02-26, 2000-09-02, 2000-04-08, 2000-10-21, 2000-04-…
$ wk1          &lt;dbl&gt; 87, 91, 81, 76, 57, 51, 97, 84, 59, 76, 84, 57, 50, 71, 7…
$ wk2          &lt;dbl&gt; 82, 87, 70, 76, 34, 39, 97, 62, 53, 76, 84, 47, 39, 51, 6…
$ wk3          &lt;dbl&gt; 72, 92, 68, 72, 25, 34, 96, 51, 38, 74, 75, 45, 30, 28, 5…
$ wk4          &lt;dbl&gt; 77, NA, 67, 69, 17, 26, 95, 41, 28, 69, 73, 29, 28, 18, 4…
$ wk5          &lt;dbl&gt; 87, NA, 66, 67, 17, 26, 100, 38, 21, 68, 73, 23, 21, 13, …
$ wk6          &lt;dbl&gt; 94, NA, 57, 65, 31, 19, NA, 35, 18, 67, 69, 18, 19, 13, 3…
$ wk7          &lt;dbl&gt; 99, NA, 54, 55, 36, 2, NA, 35, 16, 61, 68, 11, 20, 11, 34…
$ wk8          &lt;dbl&gt; NA, NA, 53, 59, 49, 2, NA, 38, 14, 58, 65, 9, 17, 1, 29, …
$ wk9          &lt;dbl&gt; NA, NA, 51, 62, 53, 3, NA, 38, 12, 57, 73, 9, 17, 1, 27, …
$ wk10         &lt;dbl&gt; NA, NA, 51, 61, 57, 6, NA, 36, 10, 59, 83, 11, 17, 2, 30,…
$ wk11         &lt;dbl&gt; NA, NA, 51, 61, 64, 7, NA, 37, 9, 66, 92, 1, 17, 2, 36, N…
$ wk12         &lt;dbl&gt; NA, NA, 51, 59, 70, 22, NA, 37, 8, 68, NA, 1, 3, 3, 37, N…
$ wk13         &lt;dbl&gt; NA, NA, 47, 61, 75, 29, NA, 38, 6, 61, NA, 1, 3, 3, 39, N…
$ wk14         &lt;dbl&gt; NA, NA, 44, 66, 76, 36, NA, 49, 1, 67, NA, 1, 7, 4, 49, N…
$ wk15         &lt;dbl&gt; NA, NA, 38, 72, 78, 47, NA, 61, 2, 59, NA, 4, 10, 12, 57,…
$ wk16         &lt;dbl&gt; NA, NA, 28, 76, 85, 67, NA, 63, 2, 63, NA, 8, 17, 11, 63,…
$ wk17         &lt;dbl&gt; NA, NA, 22, 75, 92, 66, NA, 62, 2, 67, NA, 12, 25, 13, 65…
$ wk18         &lt;dbl&gt; NA, NA, 18, 67, 96, 84, NA, 67, 2, 71, NA, 22, 29, 15, 68…
$ wk19         &lt;dbl&gt; NA, NA, 18, 73, NA, 93, NA, 83, 3, 79, NA, 23, 29, 18, 79…
$ wk20         &lt;dbl&gt; NA, NA, 14, 70, NA, 94, NA, 86, 4, 89, NA, 43, 40, 20, 86…
$ wk21         &lt;dbl&gt; NA, NA, 12, NA, NA, NA, NA, NA, 5, NA, NA, 44, 43, 30, NA…
$ wk22         &lt;dbl&gt; NA, NA, 7, NA, NA, NA, NA, NA, 5, NA, NA, NA, 50, 40, NA,…
$ wk23         &lt;dbl&gt; NA, NA, 6, NA, NA, NA, NA, NA, 6, NA, NA, NA, NA, 39, NA,…
$ wk24         &lt;dbl&gt; NA, NA, 6, NA, NA, NA, NA, NA, 9, NA, NA, NA, NA, 44, NA,…
$ wk25         &lt;dbl&gt; NA, NA, 6, NA, NA, NA, NA, NA, 13, NA, NA, NA, NA, NA, NA…
$ wk26         &lt;dbl&gt; NA, NA, 5, NA, NA, NA, NA, NA, 14, NA, NA, NA, NA, NA, NA…
$ wk27         &lt;dbl&gt; NA, NA, 5, NA, NA, NA, NA, NA, 16, NA, NA, NA, NA, NA, NA…
$ wk28         &lt;dbl&gt; NA, NA, 4, NA, NA, NA, NA, NA, 23, NA, NA, NA, NA, NA, NA…
$ wk29         &lt;dbl&gt; NA, NA, 4, NA, NA, NA, NA, NA, 22, NA, NA, NA, NA, NA, NA…
$ wk30         &lt;dbl&gt; NA, NA, 4, NA, NA, NA, NA, NA, 33, NA, NA, NA, NA, NA, NA…
$ wk31         &lt;dbl&gt; NA, NA, 4, NA, NA, NA, NA, NA, 36, NA, NA, NA, NA, NA, NA…
$ wk32         &lt;dbl&gt; NA, NA, 3, NA, NA, NA, NA, NA, 43, NA, NA, NA, NA, NA, NA…
$ wk33         &lt;dbl&gt; NA, NA, 3, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ wk34         &lt;dbl&gt; NA, NA, 3, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ wk35         &lt;dbl&gt; NA, NA, 4, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ wk36         &lt;dbl&gt; NA, NA, 5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ wk37         &lt;dbl&gt; NA, NA, 5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ wk38         &lt;dbl&gt; NA, NA, 9, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ wk39         &lt;dbl&gt; NA, NA, 9, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ wk40         &lt;dbl&gt; NA, NA, 15, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk41         &lt;dbl&gt; NA, NA, 14, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk42         &lt;dbl&gt; NA, NA, 13, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk43         &lt;dbl&gt; NA, NA, 14, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk44         &lt;dbl&gt; NA, NA, 16, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk45         &lt;dbl&gt; NA, NA, 17, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk46         &lt;dbl&gt; NA, NA, 21, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk47         &lt;dbl&gt; NA, NA, 22, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk48         &lt;dbl&gt; NA, NA, 24, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk49         &lt;dbl&gt; NA, NA, 28, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk50         &lt;dbl&gt; NA, NA, 33, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk51         &lt;dbl&gt; NA, NA, 42, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk52         &lt;dbl&gt; NA, NA, 42, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk53         &lt;dbl&gt; NA, NA, 49, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk54         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk55         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk56         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk57         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk58         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk59         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk60         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk61         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk62         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk63         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk64         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk65         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk66         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk67         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk68         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk69         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk70         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk71         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk72         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk73         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk74         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk75         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ wk76         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</code></pre>
</div>
</div>
</section>
<section id="what-went-wrong" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="what-went-wrong">What Went Wrong?</h2>
<p>Since <code>readr</code> uses the values in the first 1000 rows to guess the type of the column (logical, numeric, date/date-time, character), if the first 1000 rows don’t have any data, they will be coded as logical variables.</p>
<p>. . .</p>
<p>There are not many songs in the data that charted for 60+ weeks—and none in the first 1000 that charted for 66+ weeks!</p>
<p>. . .</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="color:blue"><i class="fa-solid fa-circle-info" aria-label="circle-info"></i></span> &nbsp;<code>NA</code> is logical<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a>?
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-1"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-1-1"><a href="#annotated-cell-1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">c</span>(T, F, <span class="cn">NA</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>))</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-1-2" class="code-annotation-target"><a href="#annotated-cell-1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="fl">17.5</span>, <span class="fl">5.3</span>, <span class="cn">NA</span>))</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-1-3" class="code-annotation-target"><a href="#annotated-cell-1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">"2023-10-31"</span>, <span class="st">"1986-06-21"</span>, <span class="st">"1997-01-15"</span>), <span class="at">tz =</span> <span class="st">"America/Los_Angeles"</span>))</span>
<span id="annotated-cell-1-4"><a href="#annotated-cell-1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">c</span>(<span class="st">"apple"</span>, <span class="cn">NA</span>, <span class="st">"mango"</span>, <span class="st">"blackberry"</span>, <span class="st">"plum"</span>)) </span>
<span id="annotated-cell-1-5"><a href="#annotated-cell-1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-1" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="2" data-code-cell="annotated-cell-1"><code>class</code> returns the data type of its first argument.</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="2">2</dt>
<dd>
<span data-code-annotation="2" data-code-lines="3" data-code-cell="annotated-cell-1"><code>as.Date</code> turns a character string of dates into an official date class in Base <code>R</code>. If we had an accompanying time stamp we would need to use <code>as.POSIXct</code> which turns a character string of dates and times into an official date-time class in Base <code>R</code>.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"
[1] "numeric"
[1] "Date"
[1] "character"
[1] "logical"</code></pre>
</div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Technically, <code>NA</code>s can be any data type depending upon what they are grouped with. However, by themselves they are a logical indicator of missing data, so their class is logical.</p>
</div></div></section>
<section id="column-types" class="level2">
<h2 class="anchored" data-anchor-id="column-types">Column types</h2>
<p>Since the <code>wk*</code> variables should all be read in as integers, we can specify this explicitly with the <code>col_types</code> argument.</p>
<p>. . .</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-12"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-12-1"><a href="#annotated-cell-12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create character string of shortcode column types</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-12" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-12-2" class="code-annotation-target"><a href="#annotated-cell-12-2" aria-hidden="true" tabindex="-1"></a>bb_types <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">c</span>(<span class="st">"icctD"</span>, <span class="fu">rep</span>(<span class="st">"i"</span>, <span class="dv">76</span>)), <span class="at">collapse=</span><span class="st">""</span>)</span>
<span id="annotated-cell-12-3"><a href="#annotated-cell-12-3" aria-hidden="true" tabindex="-1"></a>bb_types </span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-12" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="2" data-code-cell="annotated-cell-12">You can short-code column types with <code>i</code> = integer, <code>c</code> = character, <code>t</code> = time, <code>D</code> = date. <br> The <code>collapse</code> argument collapses the first two arguments into one complete character string.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "icctDiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii"</code></pre>
</div>
</div>
<p>. . .</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-13"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-13-1"><a href="#annotated-cell-13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># re-read in data with column types specified</span></span>
<span id="annotated-cell-13-2"><a href="#annotated-cell-13-2" aria-hidden="true" tabindex="-1"></a>billboard_2000_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"data/billboard.csv"</span>, </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-13-3" class="code-annotation-target"><a href="#annotated-cell-13-3" aria-hidden="true" tabindex="-1"></a>                               <span class="at">col_types =</span> bb_types)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-13" data-target-annotation="2">2</dt>
<dd>
<span data-code-annotation="2" data-code-lines="3" data-code-cell="annotated-cell-13">This string now specifies the data type for each column of our data frame. Visit <a href="https://readr.tidyverse.org/reference/cols.html">this reference page</a> to see all available column types and their short codes.</span>
</dd>
</dl>
</div>
</div>
</section>
<section id="column-types-1" class="level2">
<h2 class="anchored" data-anchor-id="column-types-1">Column types</h2>
<p>To specify a default column type you can use <code>.default</code> like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>billboard_2000_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"data/billboard.csv"</span>, </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                               <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">.default =</span> <span class="fu">col_character</span>())) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<p><br></p>
<p>Another useful helper is <code>cols_only()</code> for when you only want to read in a subset of all available variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>billboard_2000_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"data/billboard.csv"</span>, </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>                               <span class="at">col_types =</span> <span class="fu">cols_only</span>(<span class="at">x =</span> col_character)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<p><br></p>
<p>In summary, the <code>col-types</code> argument gives you greater control over how your data are read in and can save you recoding time down the road and/or point out where your data are behaving differently than you expect.</p>
</section>
<section id="reading-in-multiple-files" class="level2">
<h2 class="anchored" data-anchor-id="reading-in-multiple-files">Reading in Multiple Files</h2>
<p>If you data are split across multiple files you can read them in all at once by specifying the <code>id</code> argument.</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create list of files manually</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>sales_files <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"data/01-sales.csv"</span>, <span class="st">"data/02-sales.csv"</span>, <span class="st">"data/03-sales.csv"</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(sales_files, <span class="at">id =</span> <span class="st">"file"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 6
   file              month     year brand  item     n
   &lt;chr&gt;             &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 data/01-sales.csv January   2019     1  1234     3
 2 data/01-sales.csv January   2019     1  8721     9
 3 data/01-sales.csv January   2019     1  1822     2
 4 data/01-sales.csv January   2019     2  3333     1
 5 data/01-sales.csv January   2019     2  2156     9
 6 data/01-sales.csv January   2019     2  3987     6
 7 data/01-sales.csv January   2019     2  3827     6
 8 data/02-sales.csv February  2019     1  1234     8
 9 data/02-sales.csv February  2019     1  8721     2
10 data/02-sales.csv February  2019     1  1822     3
11 data/02-sales.csv February  2019     2  3333     1
12 data/02-sales.csv February  2019     2  2156     3
13 data/02-sales.csv February  2019     2  3987     6
14 data/03-sales.csv March     2019     1  1234     3
15 data/03-sales.csv March     2019     1  3627     1
16 data/03-sales.csv March     2019     1  8820     3
17 data/03-sales.csv March     2019     2  7253     1
18 data/03-sales.csv March     2019     2  8766     3
19 data/03-sales.csv March     2019     2  8288     6</code></pre>
</div>
</div>
</section>
<section id="reading-in-multiple-files-1" class="level2">
<h2 class="anchored" data-anchor-id="reading-in-multiple-files-1">Reading in Multiple Files</h2>
<p>If you have too many files to reasonable type out all their names you can also use the base <code>r</code> function <code>list.files</code> to list the files for you.</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-17"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-17-1"><a href="#annotated-cell-17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create list of files with pattern-matching</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-17" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-17-2" class="code-annotation-target"><a href="#annotated-cell-17-2" aria-hidden="true" tabindex="-1"></a>sales_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">"data"</span>, <span class="at">pattern =</span> <span class="st">"sales</span><span class="sc">\\</span><span class="st">.csv$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="annotated-cell-17-3"><a href="#annotated-cell-17-3" aria-hidden="true" tabindex="-1"></a>sales_files</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-17" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="2" data-code-cell="annotated-cell-17">We will discuss pattern-matching more in a couple of weeks; if all your data was in one folder without anything else in it, you wouldn’t need to specify this argument. Sometimes, however, you may be searching through larger directories that you did not organize and that’s when pattern-matching is really powerful.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data/01-sales.csv" "data/02-sales.csv" "data/03-sales.csv"</code></pre>
</div>
</div>
</section>
<section id="data-entry" class="level2">
<h2 class="anchored" data-anchor-id="data-entry">Data Entry</h2>
<p>Sometimes you’ll need to create a data set in your code. You can do this two ways:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true"><code>tibble()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false"><code>tribble()</code></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Tibbles lay out the data by columns (i.e.&nbsp;a dataframe transposed).</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating data with tibble</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>( </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>), </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="st">"h"</span>, <span class="st">"m"</span>, <span class="st">"g"</span>),</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">z =</span> <span class="fu">c</span>(<span class="fl">0.08</span>, <span class="fl">0.83</span>, <span class="fl">0.60</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
      x y         z
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
1     1 h      0.08
2     2 m      0.83
3     5 g      0.6 </code></pre>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>Tibbles (<code>tr</code>ansposed ti<code>bble</code>) lay out the data by rows (i.e.&nbsp;the way a dataframe looks) which is much more intuitive.</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating data with tribble</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tribble</span>( </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>x, <span class="sc">~</span>y, <span class="sc">~</span>z,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="st">"h"</span>, <span class="fl">0.08</span>,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">"m"</span>, <span class="fl">0.83</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">"g"</span>, <span class="fl">0.60</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
      x y         z
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
1     1 h      0.08
2     2 m      0.83
3     5 g      0.6 </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="writing-delimited-files" class="level2">
<h2 class="anchored" data-anchor-id="writing-delimited-files">Writing Delimited Files</h2>
<p>Getting data out of R into a delimited file is very similar to getting it into R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(billboard_2000_raw, <span class="at">path =</span> <span class="st">"data/billboard_data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This saved the data we pulled off the web in a file called <code>billboard_data.csv</code> in the <code>data</code> folder of my working directory.</p>
<p>. . .</p>
<p>However, saving data in this way will not preserve <code>R</code> data types since delimited files code everything as a character string.</p>
<p>. . .</p>
<p>To save <code>R</code> objects and all associated metadata you have two options:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true"><code>.Rds</code> format:</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false"><code>.Rdata</code> or <code>.Rda</code> format:</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<ul>
<li>Used for single objects, doesn’t save original the object name</li>
<li>Save: <code>write_rds(old_object_name, "path.Rds")</code></li>
<li>Load: <code>new_object_name &lt;- read_rds("path.Rds")</code></li>
</ul>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<ul>
<li>Used for saving multiple files where the original object names are preserved</li>
<li>Save: <code>save(object1, object2, ... , file = "path.Rdata")</code></li>
<li>Load: <code>load("path.Rdata")</code> without assignment operator</li>
</ul>
</div>
</div>
</div>
</section>
<section id="writing-other-file-types" class="level2">
<h2 class="anchored" data-anchor-id="writing-other-file-types">Writing Other File-Types</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true"><code>writexl</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false"><code>googlesheets4</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false"><code>haven</code></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><code>write_xlsx()</code> writes to an xlsx file</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img src="images/writexl.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><code>sheet_write()</code> or <code>write_sheet()</code> (over)writes new data into a Sheet</li>
<li><code>gs4_create()</code> creates a new Sheet</li>
<li><code>sheet_append()</code> appends rows to a sheet</li>
<li><code>range_write()</code> (over)writes new data into a range</li>
<li><code>range_flood()</code> floods a range of cells</li>
<li>`<code>range_clear()</code> clears a range of cells</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img src="images/googlesheets4.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><code>write_dta()</code> writes Stata DTA files</li>
<li><code>write_sav()</code> writes SPSS files</li>
<li><code>write_xpt()</code> writes SAS transport files</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img src="images/haven.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="tidying-and-reshaping-data" class="level1 section-title" data-background-color="#99a486">
<h1 class="section-title" data-background-color="#99a486">Tidying and Reshaping Data</h1>
</section>
<section id="section-1" class="level1 section-title page-columns page-full" data-menu-title="`tidyr`" data-background-image="images/tidyr.png" data-background-size="contain" data-background-position="center" data-background-color="#1e4655">
<h1 class="section-title" data-menu-title="`tidyr`" data-background-image="images/tidyr.png" data-background-size="contain" data-background-position="center" data-background-color="#1e4655"></h1>
<section id="initial-spot-checks" class="level2">
<h2 class="anchored" data-anchor-id="initial-spot-checks">Initial Spot Checks</h2>
<p>First things to check after loading new data:</p>
<div class="incremental">
<ul class="incremental">
<li>Did all the rows/columns from the original file make it in?
<ul class="incremental">
<li>Check using <code>dim()</code> or <code>str()</code></li>
</ul></li>
<li>Are the column names in good shape?
<ul class="incremental">
<li>Use <code>names()</code> to check; fix with <code>rename()</code></li>
</ul></li>
<li>Are there “decorative” blank rows or columns to remove?
<ul class="incremental">
<li><code>filter()</code> or <code>select()</code> out those rows/columns</li>
</ul></li>
<li>How are missing values represented: <code>NA</code>, <code>" "</code> (blank), <code>.</code> (period), <code>999</code>?
<ul class="incremental">
<li>Read in the data again specifying <code>NA</code>s with the <code>na</code> argument</li>
</ul></li>
<li>Are there character data (e.g.&nbsp;ZIP codes with leading zeroes) being incorrectly represented as numeric or vice versa?
<ul class="incremental">
<li>Read in the data again specifying desired <code>col_types</code></li>
</ul></li>
</ul>
</div>
</section>
<section id="what-is-tidy-data" class="level2">
<h2 class="anchored" data-anchor-id="what-is-tidy-data">What is Tidy Data</h2>
<p><strong>Tidy data<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a></strong> (aka “long data”) are such that:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/tidy-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
<div class="incremental">
<ol class="incremental" type="1">
<li>The values for a single observation are in their own row.</li>
<li>The values for a single variable are in their own column.</li>
<li>There is only one value per cell.</li>
</ol>
</div>
</section>
<section id="why-do-we-want-tidy-data" class="level2">
<h2 class="anchored" data-anchor-id="why-do-we-want-tidy-data">Why do we Want Tidy Data?</h2>
<div class="incremental">
<ul class="incremental">
<li><strong>Easier to understand</strong> many rows than many columns<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a></li>
<li>Required for <strong>plotting</strong> in <code>ggplot2</code><a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a></li>
<li>Required for many types of <strong>statistical procedures</strong> (e.g.&nbsp;hierarchical or mixed effects models)</li>
<li>Fewer issues with <strong>missing values and “imbalanced”</strong> repeated measures data</li>
<li>Having a consistent method for storing data means it’s easier to learn the tools to work with it since there’s an underlying uniformity.</li>
</ul>
</div>
<p>. . .</p>
<p>Most real-world data is not tidy because data are often organized for goals other than analysis (i.e.&nbsp;data entry) and most people aren’t familiar with the principles of tidy data.</p>
</section>
<section id="slightly-messy-data" class="level2">
<h2 class="anchored" data-anchor-id="slightly-messy-data">Slightly “Messy” Data</h2>
<div class="columns">
<div class="column" style="width:60%;">
<table class="table">
<thead>
<tr class="header">
<th><strong>Program</strong></th>
<th style="text-align: right;"><strong>First Year</strong></th>
<th style="text-align: right;"><strong>Second Year</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Evans School</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td>Arts &amp; Sciences</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td>Public Health</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td>Other</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:40%;">
<ul>
<li>What is an <strong>observation</strong>?
<ul>
<li>A group of students from a program of a given year</li>
</ul></li>
<li>What are the <strong>variables</strong>?
<ul>
<li>Program, Year</li>
</ul></li>
<li>What are the <strong>values</strong>?
<ul>
<li>Program: Evans School, Arts &amp; Sciences, Public Health, Other</li>
<li>Year: First, Second – <strong>in column headings. Bad!</strong></li>
<li>Count: <strong>spread over two columns!</strong></li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="tidy-version" class="level2">
<h2 class="anchored" data-anchor-id="tidy-version">Tidy Version</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table class="table">
<thead>
<tr class="header">
<th><strong>Program</strong></th>
<th style="text-align: right;"><strong>Year</strong></th>
<th style="text-align: right;"><strong>Count</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Evans School</td>
<td style="text-align: right;">First</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="even">
<td>Evans School</td>
<td style="text-align: right;">Second</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td>Arts &amp; Sciences</td>
<td style="text-align: right;">First</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td>Arts &amp; Sciences</td>
<td style="text-align: right;">Second</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td>Public Health</td>
<td style="text-align: right;">First</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td>Public Health</td>
<td style="text-align: right;">Second</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td>Other</td>
<td style="text-align: right;">First</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td>Other</td>
<td style="text-align: right;">Second</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:50%;">
<ul>
<li><p>Each variable is a column.</p></li>
<li><p>Each observation is a row.</p></li>
<li><p>Each cell has a single value.</p></li>
</ul>
</div>
</div>
</section>
<section id="billboard-is-just-ugly-messy" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="billboard-is-just-ugly-messy">Billboard is Just Ugly-Messy</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 81
    year artist     track time  date.entered   wk1   wk2   wk3   wk4   wk5   wk6
   &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;tim&gt; &lt;date&gt;       &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1  2000 2 Pac      Baby… 04:22 2000-02-26      87    82    72    77    87    94
 2  2000 2Ge+her    The … 03:15 2000-09-02      91    87    92    NA    NA    NA
 3  2000 3 Doors D… Kryp… 03:53 2000-04-08      81    70    68    67    66    57
 4  2000 3 Doors D… Loser 04:24 2000-10-21      76    76    72    69    67    65
 5  2000 504 Boyz   Wobb… 03:35 2000-04-15      57    34    25    17    17    31
 6  2000 98^0       Give… 03:24 2000-08-19      51    39    34    26    26    19
 7  2000 A*Teens    Danc… 03:44 2000-07-08      97    97    96    95   100    NA
 8  2000 Aaliyah    I Do… 04:15 2000-01-29      84    62    51    41    38    35
 9  2000 Aaliyah    Try … 04:03 2000-03-18      59    53    38    28    21    18
10  2000 Adams, Yo… Open… 05:30 2000-08-26      76    76    74    69    68    67
# ℹ 70 more variables: wk7 &lt;int&gt;, wk8 &lt;int&gt;, wk9 &lt;int&gt;, wk10 &lt;int&gt;, wk11 &lt;int&gt;,
#   wk12 &lt;int&gt;, wk13 &lt;int&gt;, wk14 &lt;int&gt;, wk15 &lt;int&gt;, wk16 &lt;int&gt;, wk17 &lt;int&gt;,
#   wk18 &lt;int&gt;, wk19 &lt;int&gt;, wk20 &lt;int&gt;, wk21 &lt;int&gt;, wk22 &lt;int&gt;, wk23 &lt;int&gt;,
#   wk24 &lt;int&gt;, wk25 &lt;int&gt;, wk26 &lt;int&gt;, wk27 &lt;int&gt;, wk28 &lt;int&gt;, wk29 &lt;int&gt;,
#   wk30 &lt;int&gt;, wk31 &lt;int&gt;, wk32 &lt;int&gt;, wk33 &lt;int&gt;, wk34 &lt;int&gt;, wk35 &lt;int&gt;,
#   wk36 &lt;int&gt;, wk37 &lt;int&gt;, wk38 &lt;int&gt;, wk39 &lt;int&gt;, wk40 &lt;int&gt;, wk41 &lt;int&gt;,
#   wk42 &lt;int&gt;, wk43 &lt;int&gt;, wk44 &lt;int&gt;, wk45 &lt;int&gt;, wk46 &lt;int&gt;, wk47 &lt;int&gt;, …</code></pre>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Week columns continue up to <code>wk76</code>!</p>
</div></div></section>
<section id="billboard" class="level2">
<h2 class="anchored" data-anchor-id="billboard">Billboard</h2>
<div class="incremental">
<ul class="incremental">
<li>What are the <strong>observations</strong> in the data?
<ul class="incremental">
<li>Song on the Billboard chart each week</li>
</ul></li>
<li>What are the <strong>variables</strong> in the data?
<ul class="incremental">
<li>Year, artist, track, song length, date entered Hot 100, week since first entered Hot 100 (<strong>spread over many columns</strong>), rank during week (<strong>spread over many columns</strong>)</li>
</ul></li>
<li>What are the <strong>values</strong> in the data?
<ul class="incremental">
<li>e.g.&nbsp;2000; 3 Doors Down; Kryptonite; 3 minutes 53 seconds; April 8, 2000; Week 3 (<strong>stuck in column headings</strong>); rank 68 (<strong>spread over many columns</strong>)</li>
</ul></li>
</ul>
</div>
</section>
<section id="tidyr" class="level2">
<h2 class="anchored" data-anchor-id="tidyr"><code>tidyr</code></h2>
<p>The <code>tidyr</code> package provides functions to tidy up data.</p>
<p>. . .</p>
<p><strong>Key functions:</strong></p>
<ul>
<li><strong><code>pivot_longer()</code></strong>: takes a set of columns and pivots them down (“longer”) to make two new columns (which you can name yourself):
<ul>
<li>A <code>name</code> column that stores the original column names</li>
<li>A <code>value</code> with the values in those original columns</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li><strong><code>pivot_wider()</code></strong>: inverts <code>pivot_longer()</code> by taking two columns and pivoting them up and across (“wider”) into multiple columns</li>
</ul>
</section>
<section id="pivot_longer" class="level2">
<h2 class="anchored" data-anchor-id="pivot_longer"><code>pivot_longer()</code></h2>
<p>This function usually takes three arguments:</p>
<div class="incremental">
<ol class="incremental" type="1">
<li><code>cols</code>: The columns that need to be pivoted (are not variables)</li>
<li><code>names_to</code>: Names the new variable that is stored in multiple columns</li>
<li><code>values_to</code>: Names the variable stored in the cell values</li>
</ol>
</div>
</section>
<section id="pivot_longer-1" class="level2">
<h2 class="anchored" data-anchor-id="pivot_longer-1"><code>pivot_longer()</code></h2>
<p>This function usually takes three arguments:</p>
<ol type="1">
<li><code>cols</code>: The columns that need to be pivoted (are not variables)</li>
<li><strong><code>names_to</code>: Names the new variable that is stored in multiple columns</strong></li>
<li><code>values_to</code>: Names the variable stored in the cell values</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pivot_longer2_column_names.png" class="img-fluid figure-img"></p>
</figure>
</div>
</section>
<section id="pivot_longer-2" class="level2">
<h2 class="anchored" data-anchor-id="pivot_longer-2"><code>pivot_longer()</code></h2>
<p>This function usually takes three arguments:</p>
<ol type="1">
<li><code>cols</code>: The columns that need to be pivoted (are not variables)</li>
<li><code>names_to</code>: Names the new variable that is stored in multiple columns</li>
<li><strong><code>values_to</code>: Names the variable stored in the cell values</strong></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pivot_longer3_cell_values.png" class="img-fluid figure-img"></p>
</figure>
</div>
</section>
<section id="pivot_longer-3" class="level2">
<h2 class="anchored" data-anchor-id="pivot_longer-3"><code>pivot_longer()</code></h2>
<p>This function usually takes three arguments:</p>
<ol type="1">
<li><code>cols</code>: The columns that need to be pivoted (are not variables)</li>
<li><code>names_to</code>: Names the new variable that is stored in multiple columns</li>
<li><code>values_to</code>: Names the variable stored in the cell values</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pivot_longer1_variables.png" class="img-fluid figure-img"></p>
</figure>
</div>
</section>
<section id="pivot_longer-example" class="level2">
<h2 class="anchored" data-anchor-id="pivot_longer-example"><code>pivot_longer()</code> Example</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-19"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-19-1"><a href="#annotated-cell-19-1" aria-hidden="true" tabindex="-1"></a>billboard_2000 <span class="ot">&lt;-</span> billboard_2000_raw <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-19" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-19-2" class="code-annotation-target"><a href="#annotated-cell-19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"wk"</span>),</span>
<span id="annotated-cell-19-3"><a href="#annotated-cell-19-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span><span class="st">"week"</span>,</span>
<span id="annotated-cell-19-4"><a href="#annotated-cell-19-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"rank"</span>)</span>
<span id="annotated-cell-19-5"><a href="#annotated-cell-19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-19-6"><a href="#annotated-cell-19-6" aria-hidden="true" tabindex="-1"></a>billboard_2000 <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">10</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-19" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="2" data-code-cell="annotated-cell-19"><code>starts_with()</code> is one of the helper functions from <a href="https://tidyselect.r-lib.org/index.html"><code>tidyselect</code></a> that helps select certain common patterns. We could have also used <code>cols = wk1:wk76</code>.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 7
    year artist track                   time   date.entered week   rank
   &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;                   &lt;time&gt; &lt;date&gt;       &lt;chr&gt; &lt;int&gt;
 1  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26   wk1      87
 2  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26   wk2      82
 3  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26   wk3      72
 4  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26   wk4      77
 5  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26   wk5      87
 6  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26   wk6      94
 7  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26   wk7      99
 8  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26   wk8      NA
 9  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26   wk9      NA
10  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26   wk10     NA</code></pre>
</div>
</div>
<p>. . .</p>
<p>Now we have a single week column!</p>
</section>
<section id="lots-of-missing-values" class="level2">
<h2 class="anchored" data-anchor-id="lots-of-missing-values">Lots of Missing Values?!</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(billboard_2000)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 24,092
Columns: 7
$ year         &lt;int&gt; 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 200…
$ artist       &lt;chr&gt; "2 Pac", "2 Pac", "2 Pac", "2 Pac", "2 Pac", "2 Pac", "2 …
$ track        &lt;chr&gt; "Baby Don't Cry (Keep...", "Baby Don't Cry (Keep...", "Ba…
$ time         &lt;time&gt; 04:22:00, 04:22:00, 04:22:00, 04:22:00, 04:22:00, 04:22:…
$ date.entered &lt;date&gt; 2000-02-26, 2000-02-26, 2000-02-26, 2000-02-26, 2000-02-…
$ week         &lt;chr&gt; "wk1", "wk2", "wk3", "wk4", "wk5", "wk6", "wk7", "wk8", "…
$ rank         &lt;int&gt; 87, 82, 72, 77, 87, 94, 99, NA, NA, NA, NA, NA, NA, NA, N…</code></pre>
</div>
</div>
<div class="fragment">
<p>It looks like 2 Pac’s song “Baby Don’t Cry” was only on the Billboard Hot 100 for 7 weeks and then dropped off the charts.</p>
</div>
<p>. . .</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(billboard_2000<span class="sc">$</span>rank)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   1.00   26.00   51.00   51.05   76.00  100.00   18785 </code></pre>
</div>
</div>
<div class="fragment">
<p>We don’t want to keep the 18785 rows with missing ranks.</p>
</div>
</section>
<section id="pivoting-better-values_drop_na" class="level2">
<h2 class="anchored" data-anchor-id="pivoting-better-values_drop_na">Pivoting Better: <code>values_drop_na</code></h2>
<p>Adding the argument <code>values_drop_na = TRUE</code> to <code>pivot_longer()</code> will remove rows with missing ranks. Since these <code>NA</code>s don’t really represent unknown observations (i.e.&nbsp;they were forced to exist by the structure of the dataset) this is an appropriate approach here.</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>billboard_2000 <span class="ot">&lt;-</span> billboard_2000_raw <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> wk1<span class="sc">:</span>wk76, </span>
<span id="cb31-3"><a href="#cb31-3"></a>               <span class="at">names_to =</span> <span class="st">"week"</span>, </span>
<span id="cb31-4"><a href="#cb31-4"></a>               <span class="at">values_to =</span> <span class="st">"rank"</span>, </span>
<span id="cb31-5"><a href="#cb31-5"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-6"><a href="#cb31-6"></a><span class="fu">summary</span>(billboard_2000<span class="sc">$</span>rank)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1.00   26.00   51.00   51.05   76.00  100.00 </code></pre>
</div>
</div>
<p>. . .</p>
<p>No more <code>NA</code> values!</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(billboard_2000)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5307    7</code></pre>
</div>
</div>
<p>. . .</p>
<p>And way fewer rows!</p>
</section>
<section id="parse_number" class="level2">
<h2 class="anchored" data-anchor-id="parse_number"><code>parse_number()</code></h2>
<p>The week column is of the type <code>character</code>, but it should be <code>numeric.</code></p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(billboard_2000<span class="sc">$</span>week)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "wk1" "wk2" "wk3" "wk4" "wk5" "wk6"</code></pre>
</div>
</div>
<p>. . .</p>
<p><code>parse_number()</code> grabs just the numeric information from a character string:</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-25"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-25-1"><a href="#annotated-cell-25-1" aria-hidden="true" tabindex="-1"></a>billboard_2000 <span class="ot">&lt;-</span> billboard_2000 <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-25" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-25-2" class="code-annotation-target"><a href="#annotated-cell-25-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">week =</span> <span class="fu">parse_number</span>(week))</span>
<span id="annotated-cell-25-3"><a href="#annotated-cell-25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(billboard_2000<span class="sc">$</span>week)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-25" data-target-annotation="2">2</dt>
<dd>
<span data-code-annotation="2" data-code-lines="2" data-code-cell="annotated-cell-25">You can use <code>mutate()</code> to overwrite existing columns.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1.00    5.00   10.00   11.47   16.00   65.00 </code></pre>
</div>
</div>
<p>. . .</p>
<p>More sophisticated tools for character strings will be covered later in this course!</p>
</section>
<section id="use-pivot_longer-arguments" class="level2">
<h2 class="anchored" data-anchor-id="use-pivot_longer-arguments">Use <code>pivot_longer</code> arguments</h2>
<p>Alternatively (and more efficiently), there are a number of optional arguments for <code>pivot_longer</code> that are meant to help deal with naming issues.</p>
<p>. . .</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-26"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-26-1"><a href="#annotated-cell-26-1" aria-hidden="true" tabindex="-1"></a>billboard_2000 <span class="ot">&lt;-</span> billboard_2000_raw <span class="sc">%&gt;%</span></span>
<span id="annotated-cell-26-2"><a href="#annotated-cell-26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">starts_with</span>(<span class="st">"wk"</span>), </span>
<span id="annotated-cell-26-3"><a href="#annotated-cell-26-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to        =</span> <span class="st">"week"</span>, </span>
<span id="annotated-cell-26-4"><a href="#annotated-cell-26-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to       =</span> <span class="st">"rank"</span>,</span>
<span id="annotated-cell-26-5"><a href="#annotated-cell-26-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_drop_na  =</span> <span class="cn">TRUE</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-26" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-26-6" class="code-annotation-target"><a href="#annotated-cell-26-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_prefix    =</span> <span class="st">"wk"</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-26" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-26-7" class="code-annotation-target"><a href="#annotated-cell-26-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_transform =</span> <span class="fu">list</span>(<span class="at">week =</span> as.integer))</span>
<span id="annotated-cell-26-8"><a href="#annotated-cell-26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-26-9"><a href="#annotated-cell-26-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(billboard_2000, <span class="dv">5</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-26" data-target-annotation="3">3</dt>
<dd>
<span data-code-annotation="3" data-code-lines="6" data-code-cell="annotated-cell-26"><code>names_prefix</code> is used to remove “wk” from the values of <code>week</code></span>
</dd>
<dt data-target-cell="annotated-cell-26" data-target-annotation="4">4</dt>
<dd>
<span data-code-annotation="4" data-code-lines="7" data-code-cell="annotated-cell-26"><code>names_transform</code> converts <code>week</code> into an integer number.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 7
   year artist track                   time   date.entered  week  rank
  &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;                   &lt;time&gt; &lt;date&gt;       &lt;int&gt; &lt;int&gt;
1  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26       1    87
2  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26       2    82
3  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26       3    72
4  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26       4    77
5  2000 2 Pac  Baby Don't Cry (Keep... 04:22  2000-02-26       5    87</code></pre>
</div>
</div>
</section>
<section id="multiple-variables-in-column-names" class="level2">
<h2 class="anchored" data-anchor-id="multiple-variables-in-column-names">Multiple Variables in Column Names</h2>
<p>A more challenging situation occurs when you have multiple pieces of information crammed into the column names, and you would like to store these in separate new variables.</p>
<p>. . .</p>
<p>This dataset contains tuberculosis diagnoses collected by the World Health Organization.</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>who2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7,240 × 58
   country      year sp_m_014 sp_m_1524 sp_m_2534 sp_m_3544 sp_m_4554 sp_m_5564
   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
 1 Afghanistan  1980       NA        NA        NA        NA        NA        NA
 2 Afghanistan  1981       NA        NA        NA        NA        NA        NA
 3 Afghanistan  1982       NA        NA        NA        NA        NA        NA
 4 Afghanistan  1983       NA        NA        NA        NA        NA        NA
 5 Afghanistan  1984       NA        NA        NA        NA        NA        NA
 6 Afghanistan  1985       NA        NA        NA        NA        NA        NA
 7 Afghanistan  1986       NA        NA        NA        NA        NA        NA
 8 Afghanistan  1987       NA        NA        NA        NA        NA        NA
 9 Afghanistan  1988       NA        NA        NA        NA        NA        NA
10 Afghanistan  1989       NA        NA        NA        NA        NA        NA
# ℹ 7,230 more rows
# ℹ 50 more variables: sp_m_65 &lt;dbl&gt;, sp_f_014 &lt;dbl&gt;, sp_f_1524 &lt;dbl&gt;,
#   sp_f_2534 &lt;dbl&gt;, sp_f_3544 &lt;dbl&gt;, sp_f_4554 &lt;dbl&gt;, sp_f_5564 &lt;dbl&gt;,
#   sp_f_65 &lt;dbl&gt;, sn_m_014 &lt;dbl&gt;, sn_m_1524 &lt;dbl&gt;, sn_m_2534 &lt;dbl&gt;,
#   sn_m_3544 &lt;dbl&gt;, sn_m_4554 &lt;dbl&gt;, sn_m_5564 &lt;dbl&gt;, sn_m_65 &lt;dbl&gt;,
#   sn_f_014 &lt;dbl&gt;, sn_f_1524 &lt;dbl&gt;, sn_f_2534 &lt;dbl&gt;, sn_f_3544 &lt;dbl&gt;,
#   sn_f_4554 &lt;dbl&gt;, sn_f_5564 &lt;dbl&gt;, sn_f_65 &lt;dbl&gt;, ep_m_014 &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>. . .</p>
<p>The first two columns are self explanatory but what’s going on with the rest?</p>
</section>
<section id="multiple-variables-in-column-names-1" class="level2">
<h2 class="anchored" data-anchor-id="multiple-variables-in-column-names-1">Multiple Variables in Column Names</h2>
<p>Data documentation and some minor investigation would lead you to figure out that the three elements in each of these column names are actually data!</p>
<ul>
<li>The first piece, <code>sp</code>/<code>sn</code>/<code>rel</code>/<code>ep</code>, describes the method used for the diagnosis</li>
<li>The second piece, <code>m</code>/<code>f</code> is the gender (coded as a binary variable in this dataset)</li>
<li>The third piece, <code>014</code>/<code>1524</code>/<code>2534</code>/<code>3544</code>/<code>4554</code>/<code>5564</code>/<code>65</code> is the age range (014 represents 0-14, for example)</li>
</ul>
<p>. . .</p>
<p>To organize the six pieces of information in this dataset into six separate columns, we use <code>pivot_longer()</code> with a vector of column names for <code>names_to</code> and instructors for splitting the original variable names into pieces for <code>names_sep</code> as well as a column name for <code>values_to</code>!</p>
</section>
<section id="multiple-variables-in-column-names-2" class="level2">
<h2 class="anchored" data-anchor-id="multiple-variables-in-column-names-2">Multiple Variables in Column Names</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-28"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-28-1"><a href="#annotated-cell-28-1" aria-hidden="true" tabindex="-1"></a>who2 <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-28-2"><a href="#annotated-cell-28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="annotated-cell-28-3"><a href="#annotated-cell-28-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">!</span>(country<span class="sc">:</span>year),</span>
<span id="annotated-cell-28-4"><a href="#annotated-cell-28-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"diagnosis"</span>, <span class="st">"gender"</span>, <span class="st">"age"</span>), </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-28" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-28-5" class="code-annotation-target"><a href="#annotated-cell-28-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">"_"</span>,</span>
<span id="annotated-cell-28-6"><a href="#annotated-cell-28-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"count"</span></span>
<span id="annotated-cell-28-7"><a href="#annotated-cell-28-7" aria-hidden="true" tabindex="-1"></a>  )</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-28" data-target-annotation="5">5</dt>
<dd>
<span data-code-annotation="5" data-code-lines="5" data-code-cell="annotated-cell-28">You can use <code>names_pattern</code> instead of <code>names_sep</code> to extract variables from more complicated naming scenarios once you’ve learned regular expressions in a few weeks.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 405,440 × 6
   country      year diagnosis gender age   count
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
 1 Afghanistan  1980 sp        m      014      NA
 2 Afghanistan  1980 sp        m      1524     NA
 3 Afghanistan  1980 sp        m      2534     NA
 4 Afghanistan  1980 sp        m      3544     NA
 5 Afghanistan  1980 sp        m      4554     NA
 6 Afghanistan  1980 sp        m      5564     NA
 7 Afghanistan  1980 sp        m      65       NA
 8 Afghanistan  1980 sp        f      014      NA
 9 Afghanistan  1980 sp        f      1524     NA
10 Afghanistan  1980 sp        f      2534     NA
# ℹ 405,430 more rows</code></pre>
</div>
</div>
</section>
<section id="variable-values-in-column-names" class="level2">
<h2 class="anchored" data-anchor-id="variable-values-in-column-names">Variable &amp; Values in Column Names</h2>
<p>This dataset contains data about five families, with the names and dates of birth of up to two children.</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>household</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  family dob_child1 dob_child2 name_child1 name_child2
   &lt;int&gt; &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;       &lt;chr&gt;      
1      1 1998-11-26 2000-01-29 Susan       Jose       
2      2 1996-06-22 NA         Mark        &lt;NA&gt;       
3      3 2002-07-11 2004-04-05 Sam         Seth       
4      4 2004-10-10 2009-08-27 Craig       Khai       
5      5 2000-12-05 2005-02-28 Parker      Gracie     </code></pre>
</div>
</div>
<p>. . .</p>
<p>The new challenge in this dataset is that the column names contain the names of two variables (<code>dob</code>, <code>name</code>) and the values of another (<code>child</code>, with values <code>1</code> or <code>2</code>).</p>
</section>
<section id="variable-values-in-column-names-1" class="level2">
<h2 class="anchored" data-anchor-id="variable-values-in-column-names-1">Variable &amp; Values in Column Names</h2>
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="annotated-cell-30"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-30-1"><a href="#annotated-cell-30-1" aria-hidden="true" tabindex="-1"></a>household <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-30-2"><a href="#annotated-cell-30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="annotated-cell-30-3"><a href="#annotated-cell-30-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">!</span>family, </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-30" data-target-annotation="6" onclick="event.preventDefault();">6</a><span id="annotated-cell-30-4" class="code-annotation-target"><a href="#annotated-cell-30-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">".value"</span>, <span class="st">"child"</span>),</span>
<span id="annotated-cell-30-5"><a href="#annotated-cell-30-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">"_"</span>, </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-30" data-target-annotation="7" onclick="event.preventDefault();">7</a><span id="annotated-cell-30-6" class="code-annotation-target"><a href="#annotated-cell-30-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_drop_na =</span> <span class="cn">TRUE</span></span>
<span id="annotated-cell-30-7"><a href="#annotated-cell-30-7" aria-hidden="true" tabindex="-1"></a>  )</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-30" data-target-annotation="6">6</dt>
<dd>
<span data-code-annotation="6" data-code-lines="4" data-code-cell="annotated-cell-30"><code>.value</code> isn’t the name of a variable but a unique value that tells <code>pivot_longer</code> to use the first component of the pivoted column name as a variable name in the output.</span>
</dd>
<dt data-target-cell="annotated-cell-30" data-target-annotation="7">7</dt>
<dd>
<span data-code-annotation="7" data-code-lines="6" data-code-cell="annotated-cell-30">Using <code>values_drop_na = TRUE</code> again since not every family has 2 children.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 4
  family child  dob        name  
   &lt;int&gt; &lt;chr&gt;  &lt;date&gt;     &lt;chr&gt; 
1      1 child1 1998-11-26 Susan 
2      1 child2 2000-01-29 Jose  
3      2 child1 1996-06-22 Mark  
4      3 child1 2002-07-11 Sam   
5      3 child2 2004-04-05 Seth  
6      4 child1 2004-10-10 Craig 
7      4 child2 2009-08-27 Khai  
8      5 child1 2000-12-05 Parker
9      5 child2 2005-02-28 Gracie</code></pre>
</div>
</div>
<p>. . .</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pivot_longer5_names-and-values.png" class="img-fluid figure-img" style="width:75.0%"></p>
</figure>
</div>
</section>
<section id="pivot_wider" class="level2">
<h2 class="anchored" data-anchor-id="pivot_wider"><code>pivot_wider</code></h2>
<p><code>pivot_wider()</code> is the opposite of <code>pivot_longer()</code>, which you use if you have data for the same observation taking up multiple rows.</p>
<p>. . .</p>
<p>Here’s an example of data that we probably want to pivot wider (unless we want to plot each statistic in its own facet):</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  Group Statistic Value
  &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;
1 A     Mean       1.28
2 A     Median     1   
3 A     SD         0.72
4 B     Mean       2.81
5 B     Median     2   
6 B     SD         1.33</code></pre>
</div>
</div>
<p>. . .</p>
<p>A common cue to use <code>pivot_wider()</code> is having measurements of different quantities in the same column.</p>
</section>
<section id="pivot_wider-example" class="level2">
<h2 class="anchored" data-anchor-id="pivot_wider-example"><code>pivot_wider</code> Example</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-31"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-31-1"><a href="#annotated-cell-31-1" aria-hidden="true" tabindex="-1"></a>wide_stats <span class="ot">&lt;-</span> long_stats <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-31" data-target-annotation="8" onclick="event.preventDefault();">8</a><span id="annotated-cell-31-2" class="code-annotation-target"><a href="#annotated-cell-31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> Group,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-31" data-target-annotation="9" onclick="event.preventDefault();">9</a><span id="annotated-cell-31-3" class="code-annotation-target"><a href="#annotated-cell-31-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> Statistic,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-31" data-target-annotation="10" onclick="event.preventDefault();">10</a><span id="annotated-cell-31-4" class="code-annotation-target"><a href="#annotated-cell-31-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> Value)</span>
<span id="annotated-cell-31-5"><a href="#annotated-cell-31-5" aria-hidden="true" tabindex="-1"></a>wide_stats</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-31" data-target-annotation="8">8</dt>
<dd>
<span data-code-annotation="8" data-code-lines="2" data-code-cell="annotated-cell-31"><code>id_cols</code> is the column that uniquely identifies each row in the new dataset. Default is everything not in <code>names_from</code> and <code>values_from</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-31" data-target-annotation="9">9</dt>
<dd>
<span data-code-annotation="9" data-code-lines="3" data-code-cell="annotated-cell-31"><code>names_from</code> provides the names that will be used for the new columns</span>
</dd>
<dt data-target-cell="annotated-cell-31" data-target-annotation="10">10</dt>
<dd>
<span data-code-annotation="10" data-code-lines="4" data-code-cell="annotated-cell-31"><code>values_from</code> provides the values that will be used to populate the cells of the new columns.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  Group  Mean Median    SD
  &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
1 A      1.28      1  0.72
2 B      2.81      2  1.33</code></pre>
</div>
</div>
<p>. . .</p>
<p><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html"><code>pivot_wider()</code></a> also has a number of optional <code>names_*</code> and <code>values_*</code> arguments for more complicated transformations.</p>
<p>. . .</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="color:orange"><i class="fa-solid fa-triangle-exclamation" aria-label="triangle-exclamation"></i></span> Nested Data
</div>
</div>
<div class="callout-body-container callout-body">
<p>If there are multiple rows in the input that correspond to one cell in the output you’ll get a list-column. This means that you 1) need to fix something in your code/data because it shouldn’t be nested in this way or 2) need to use <code>unnest_wider()</code> or <code>unnest_longer()</code> in order to access this column of data. More on this <a href="https://r4ds.hadley.nz/rectangling.html#unnesting">here</a>.</p>
</div>
</div>
</section>
<section id="activity" class="level2">
<h2 class="anchored" data-anchor-id="activity">Activity!</h2>
<p>In groups of 2-3, you will use the <a href="https://raw.githubusercontent.com/vsass/CSSS508/main/Lectures/Lecture5/data/billboard.csv">Billboard data</a> to investigate a question:</p>
<ol type="1">
<li><p>Write down a question of interest that could be studied with this data</p>
<ul>
<li><em>Which/how many artists had #1 hits?</em></li>
<li><em>How does rank for each song change over time?</em></li>
<li><em>Is there a relationship between highest rank and length of song?</em></li>
</ul></li>
<li><p>Make the Billboard data <em>tidy</em>, perhaps using the code from this lecture.</p></li>
<li><p>Perform additional steps (if necessary) to help answer your question:</p>
<ul>
<li>Perhaps using <code>filter</code>, <code>select</code>, <code>group_by</code>, <code>mutate</code>, <code>summarize</code>, etc.</li>
</ul></li>
<li><p>Make a plot or table that answers your question and write down your answer in a sentence.</p></li>
<li><p>Send me your question, plot/table, and written answer on Canvas</p></li>
</ol>
</section>
<section id="example-question" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="example-question">Example: Question</h2>
<p><strong>Question:</strong> Do songs that hit #1 have a different trajectory than those that don’t?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>billboard_2000_question <span class="ot">&lt;-</span> billboard_2000 <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(artist, track) <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Weeks at #1</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">sum</span>(rank <span class="sc">==</span> <span class="dv">1</span>),</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>           <span class="st">`</span><span class="at">Peak Rank</span><span class="st">`</span>   <span class="ot">=</span> <span class="fu">ifelse</span>(<span class="fu">any</span>(rank <span class="sc">==</span> <span class="dv">1</span>),</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">"Hit #1"</span>,</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">"Didn't hit #1"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Note: <code>any(rank==1)</code> checks to see if <em>any</em> value of <code>rank</code> is equal to one for the given <code>artist</code> and <code>track</code></p>
</div></div></section>
<section id="example-visualization" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="example-visualization">Example Visualization</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Charts of 2000: Beauty!</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>billboard_trajectories <span class="ot">&lt;-</span> </span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> billboard_2000_question,</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>         <span class="fu">aes</span>(<span class="at">x =</span> week, <span class="at">y =</span> rank, <span class="at">group =</span> track,</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">`</span><span class="at">Peak Rank</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">size =</span> <span class="st">`</span><span class="at">Peak Rank</span><span class="st">`</span>), <span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_tufte</span>() <span class="sc">+</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Week"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Rank"</span>) <span class="sc">+</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.90</span>, <span class="fl">0.75</span>),</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"transparent"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>billboard_trajectories</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="CSSS508_Lecture5_files/figure-html/unnamed-chunk-44-1.svg" class="img-fluid"></p>
</div>
</div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Songs that reach #1 on the Billboard charts appear to last &gt;20 weeks on the charts, while other songs very rarely make it past that point.</p>
</div></div></section>
</section>
<section id="homework" class="level1">
<h1>Homework</h1>
<section id="homework-4" class="level2">
<h2 class="anchored" data-anchor-id="homework-4">Homework 4</h2>
<p>*On <a href="https://vsass.github.io/CSSS508/Homework/HW5/homework4.html">Course Website!*</a></p>
</section>
<section id="due-dates" class="level2">
<h2 class="anchored" data-anchor-id="due-dates">Due dates</h2>
<div class="cell">
<div class="cell-output-display">

<div id="ifcisxazfc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ifcisxazfc table {
  font-family: Quattrocento, Raleway;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ifcisxazfc thead, #ifcisxazfc tbody, #ifcisxazfc tfoot, #ifcisxazfc tr, #ifcisxazfc td, #ifcisxazfc th {
  border-style: none;
}

#ifcisxazfc p {
  margin: 0;
  padding: 0;
}

#ifcisxazfc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 100%;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: hidden;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ifcisxazfc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ifcisxazfc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ifcisxazfc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ifcisxazfc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ifcisxazfc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ifcisxazfc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ifcisxazfc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ifcisxazfc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ifcisxazfc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ifcisxazfc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ifcisxazfc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ifcisxazfc .gt_spanner_row {
  border-bottom-style: hidden;
}

#ifcisxazfc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ifcisxazfc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ifcisxazfc .gt_from_md > :first-child {
  margin-top: 0;
}

#ifcisxazfc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ifcisxazfc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ifcisxazfc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ifcisxazfc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ifcisxazfc .gt_row_group_first td {
  border-top-width: 2px;
}

#ifcisxazfc .gt_row_group_first th {
  border-top-width: 2px;
}

#ifcisxazfc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ifcisxazfc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ifcisxazfc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ifcisxazfc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ifcisxazfc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ifcisxazfc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ifcisxazfc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ifcisxazfc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ifcisxazfc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ifcisxazfc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ifcisxazfc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ifcisxazfc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ifcisxazfc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ifcisxazfc .gt_left {
  text-align: left;
}

#ifcisxazfc .gt_center {
  text-align: center;
}

#ifcisxazfc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ifcisxazfc .gt_font_normal {
  font-weight: normal;
}

#ifcisxazfc .gt_font_bold {
  font-weight: bold;
}

#ifcisxazfc .gt_font_italic {
  font-style: italic;
}

#ifcisxazfc .gt_super {
  font-size: 65%;
}

#ifcisxazfc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ifcisxazfc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ifcisxazfc .gt_indent_1 {
  text-indent: 5px;
}

#ifcisxazfc .gt_indent_2 {
  text-indent: 10px;
}

#ifcisxazfc .gt_indent_3 {
  text-indent: 15px;
}

#ifcisxazfc .gt_indent_4 {
  text-indent: 20px;
}

#ifcisxazfc .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="#">#</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="<strong>Section AA</strong>">
        <span class="gt_column_spanner"><strong>Section AA</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="<strong>Section AB</strong>">
        <span class="gt_column_spanner"><strong>Section AB</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" style="background-color: #C7CDAC;" scope="col" id="Homework Due">Homework Due</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" style="background-color: #99A486;" scope="col" id="Peer Review Due">Peer Review Due</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" style="background-color: #C7CDAC;" scope="col" id="Homework Due">Homework Due</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" style="background-color: #99A486;" scope="col" id="Peer Review Due">Peer Review Due</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Homework" class="gt_row gt_center">1</td>
<td headers="Due_Date_AA" class="gt_row gt_center">10 October</td>
<td headers="Peer_Due_Date_AA" class="gt_row gt_center">15 October</td>
<td headers="Due_Date_AB" class="gt_row gt_center">12 October</td>
<td headers="Peer_Due_Date_AB" class="gt_row gt_center">17 October</td></tr>
    <tr><td headers="Homework" class="gt_row gt_center">2</td>
<td headers="Due_Date_AA" class="gt_row gt_center">17 October</td>
<td headers="Peer_Due_Date_AA" class="gt_row gt_center">22 October</td>
<td headers="Due_Date_AB" class="gt_row gt_center">19 October</td>
<td headers="Peer_Due_Date_AB" class="gt_row gt_center">24 October</td></tr>
    <tr><td headers="Homework" class="gt_row gt_center">3</td>
<td headers="Due_Date_AA" class="gt_row gt_center">24 October</td>
<td headers="Peer_Due_Date_AA" class="gt_row gt_center">29 October</td>
<td headers="Due_Date_AB" class="gt_row gt_center">26 October</td>
<td headers="Peer_Due_Date_AB" class="gt_row gt_center">31 October</td></tr>
    <tr><td headers="Homework" class="gt_row gt_center">4</td>
<td headers="Due_Date_AA" class="gt_row gt_center">31 October</td>
<td headers="Peer_Due_Date_AA" class="gt_row gt_center">5 November</td>
<td headers="Due_Date_AB" class="gt_row gt_center">2 November</td>
<td headers="Peer_Due_Date_AB" class="gt_row gt_center">7 November</td></tr>
    <tr><td headers="Homework" class="gt_row gt_center" style="border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: #1e4655; border-top-width: 3px; border-top-style: solid; border-top-color: #1e4655; border-left-width: 3px; border-left-style: solid; border-left-color: #1e4655;">5</td>
<td headers="Due_Date_AA" class="gt_row gt_center" style="background-color: #C7CDAC; border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: #1e4655; border-top-width: 3px; border-top-style: solid; border-top-color: #1e4655;">7 November</td>
<td headers="Peer_Due_Date_AA" class="gt_row gt_center" style="background-color: #99A486; border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: #1e4655; border-top-width: 3px; border-top-style: solid; border-top-color: #1e4655;">12 November</td>
<td headers="Due_Date_AB" class="gt_row gt_center" style="background-color: #C7CDAC; border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: #1e4655; border-top-width: 3px; border-top-style: solid; border-top-color: #1e4655;">9 November</td>
<td headers="Peer_Due_Date_AB" class="gt_row gt_center" style="background-color: #99A486; border-bottom-width: 3px; border-bottom-style: solid; border-bottom-color: #1e4655; border-top-width: 3px; border-top-style: solid; border-top-color: #1e4655; border-right-width: 3px; border-right-style: solid; border-right-color: #1e4655;">14 November</td></tr>
    <tr><td headers="Homework" class="gt_row gt_center">6</td>
<td headers="Due_Date_AA" class="gt_row gt_center">14 November</td>
<td headers="Peer_Due_Date_AA" class="gt_row gt_center">19 November</td>
<td headers="Due_Date_AB" class="gt_row gt_center">16 November</td>
<td headers="Peer_Due_Date_AB" class="gt_row gt_center">21 November</td></tr>
    <tr><td headers="Homework" class="gt_row gt_center">7</td>
<td headers="Due_Date_AA" class="gt_row gt_center">21 November</td>
<td headers="Peer_Due_Date_AA" class="gt_row gt_center">26 November</td>
<td headers="Due_Date_AB" class="gt_row gt_center">23 November</td>
<td headers="Peer_Due_Date_AB" class="gt_row gt_center">28 November</td></tr>
    <tr><td headers="Homework" class="gt_row gt_center">8</td>
<td headers="Due_Date_AA" class="gt_row gt_center">28 November</td>
<td headers="Peer_Due_Date_AA" class="gt_row gt_center">3 November</td>
<td headers="Due_Date_AB" class="gt_row gt_center">30 November</td>
<td headers="Peer_Due_Date_AB" class="gt_row gt_center">5 November</td></tr>
    <tr><td headers="Homework" class="gt_row gt_center">9</td>
<td headers="Due_Date_AA" class="gt_row gt_center">5 December</td>
<td headers="Peer_Due_Date_AA" class="gt_row gt_center">10 December</td>
<td headers="Due_Date_AB" class="gt_row gt_center">7 December</td>
<td headers="Peer_Due_Date_AB" class="gt_row gt_center">12 December</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Ideally you’ve saved it in your project folder! 😌<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>We’ll cover these more in depth in a couple of weeks.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Functions have additional arguments to read in specific sheets or a range of cells.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Functions have additional arguments to read in specific sheets or a range of cells.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Very similar to <code>readxl</code> with some slight variations you can read about <a href="https://r4ds.hadley.nz/spreadsheets.html#google-sheets">here</a>.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Functions have additional arguments to read in specific sheets or a range of cells.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Very similar to <code>readxl</code> with some slight variations you can read about <a href="https://r4ds.hadley.nz/spreadsheets.html#google-sheets">here</a>.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>SAS, SPSS, and Stata have so-called “labelled” vectors for which <code>haven</code> provides a <a href="https://haven.tidyverse.org/reference/index.html#labelled-vectors">class</a> to represent in <code>R</code>. Alternatively, you can get rid of them with <a href="https://haven.tidyverse.org/reference/index.html#remove-attributes">these functions</a>.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>More on this in a couple of weeks.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>Read the original article <a href="https://www.jstatsoft.org/article/view/v059i10">here</a>.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>Placing variables in columns also leverages <code>R</code>’s vectorized nature, i.e.&nbsp;most built-in <code>R</code> functions work with values of vectors.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>In fact, all tidyverse functions are designed to work with tidy data.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Created with <a href="https://quarto.org/">Quarto</a> • <a href="https://creativecommons.org/licenses/by-nc/4.0/">License</a></div>   
    <div class="nav-footer-center">Copyright © 2023 Victoria Sass <br> Course content adapted from <a href="https://clanfear.github.io/CSSS508/">Chuck Lanfear</a> and <a href="https://pearce790.github.io/CSSS508/index.html">Michael Pearce</a></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:vsass@uw.edu">
      <i class="bi bi-envelope-at" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://scholar.google.com/citations?user=A3lEdiIAAAAJ&amp;hl=en">
      <i class="bi bi-google" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/vsass">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="http://vsass.github.io/Sass_Victoria_CV_2023.pdf">
      <i class="bi bi-file-person" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>