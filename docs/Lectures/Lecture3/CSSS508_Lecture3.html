<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>csss508_lecture3</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-09ad465de797c9fa47eb004b66687419.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-a91c5eb92031c01585ac21bee704d2ce.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="http://vsass.github.io"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">CS&amp;SS 508</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../Lectures/lectures.html"> 
<span class="menu-text">Lectures</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../Homework/homework.html"> 
<span class="menu-text">Homework</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="CSSS508_Lecture3.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="title-slide" class="level2" data-menu-title="Workflow &amp; Reproducibility" data-background="#1e4655" data-background-image="../../images/csss-logo.png" data-background-position="center top 5%" data-background-size="50%">
<h2 data-menu-title="Workflow &amp; Reproducibility" data-background="#1e4655" data-background-image="../../images/csss-logo.png" data-background-position="center top 5%" data-background-size="50%" class="anchored" data-anchor-id="title-slide"></h2>
<p><span class="custom-title">Workflow &amp; Reproducibility</span></p>
<p><span class="custom-subtitle">CS&amp;SS 508 • Lecture 3</span></p>
<p><span class="custom-subtitle2">14 October 2025</span></p>
<p><span class="custom-subtitle3">Victoria Sass</span></p>
</section>
<section id="roadmap" class="level1 section-title" data-background-color="#99a486">
<h1 class="section-title" data-background-color="#99a486">Roadmap</h1>
<hr>
<div class="columns">
<div class="column" style="width:50%;">
<p><br></p>
<section id="last-time-we-learned" class="level3">
<h3 class="anchored" data-anchor-id="last-time-we-learned">Last time, we learned:</h3>
<ul>
<li>The <code>tidyverse</code></li>
<li>Basics of <code>ggplot2</code></li>
<li>Advanced features of <code>ggplot2</code></li>
<li>Extensions of <code>ggplot2</code></li>
</ul>
</section>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="fragment">
<section id="today-we-will-cover" class="level3">
<h3 class="anchored" data-anchor-id="today-we-will-cover">Today, we will cover:</h3>
<ul>
<li>Code Style</li>
<li>Workflow</li>
<li>Reproducibility</li>
<li>Useful Base <code>R</code></li>
</ul>
</section>
</div>
</div>
</div>
</section>
<section id="code-style" class="level1 section-title page-columns page-full" data-background-color="#99a486">
<h1 class="section-title" data-background-color="#99a486">Code Style</h1>
<section id="disclaimer" class="level2">
<h2 class="anchored" data-anchor-id="disclaimer">Disclaimer</h2>
<p>There are honestly no hard, fast rules about what is <strong>the</strong> <em>correct code</em>. You can produce all styles of code that will run and get you your desired results.</p>
<p>. . .</p>
<p>However, the following recommendations are made with these truths in mind:</p>
<div class="incremental">
<ul class="incremental">
<li>Using a consistent style cuts down on the decisions you have to make, therefore allowing you to focus your attention on the substance of your code
<ul class="incremental">
<li>This makes code easier to write and your overall process more efficient!</li>
</ul></li>
<li>Easy-to-read code is faster-read-code: both for any collaborators you may have and also future-you.
<ul class="incremental">
<li>This is particularly helpful when scanning code in order to troubleshoot an error</li>
</ul></li>
</ul>
</div>
<p>. . .</p>
<p>You can read more about the specific style we’re using in this class <a href="https://style.tidyverse.org/">here</a>.</p>
</section>
<section id="naming-objects" class="level2">
<h2 class="anchored" data-anchor-id="naming-objects">Naming Objects</h2>
<p>It’s good practice to name objects (and oftentimes variables) using only lowercase letters, numbers, and <code>_</code> (to separate words).</p>
<p>. . .</p>
<p>Remember to give them descriptive names, even if that means they’re longer.</p>
<p>. . .</p>
<p>If you have many related variables, try and be consistent with your naming convention.</p>
<ul>
<li>A common prefix is preferable to a common suffix due to RStudio’s autocomplete feature.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code goal: </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>short_flights <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(air_time <span class="sc">&lt;</span> <span class="dv">60</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Code foul: </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>SHORTFLIGHTS <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(air_time <span class="sc">&lt;</span> <span class="dv">60</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="spacing" class="level2">
<h2 class="anchored" data-anchor-id="spacing">Spacing</h2>
<p>For readability you’ll want to put spaces around all mathematical operators<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> (i.e.&nbsp;<code>+</code>, <code>-</code>, <code>==</code>, <code>&lt;</code>, etc.) as well as the assignment operator (<code>&lt;-</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code goals: </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> (a <span class="sc">+</span> b)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> d</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Code foul: </span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>z<span class="ot">&lt;-</span>( a<span class="sc">+</span>b ) <span class="sc">^</span> <span class="dv">2</span><span class="sc">/</span>d</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span> (x ,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<p>To make code easier to skim quickly it’s alright to add extra space for better alignment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">speed      =</span> distance <span class="sc">/</span> air_time,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">dep_hour   =</span> dep_time <span class="sc">%/%</span> <span class="dv">100</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">dep_minute =</span> dep_time <span class="sc">%%</span>  <span class="dv">100</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="pipes" class="level2">
<h2 class="anchored" data-anchor-id="pipes">Pipes</h2>
<p>As you begin to use more functions, sequentially, it can start to get unclear what’s happening when, and to what.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(<span class="fu">sqrt</span>(<span class="fu">log</span>(<span class="fu">mean</span>(gapminder<span class="sc">$</span>pop))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<p>With nested functions, like those above, you need to read the order of operations inside out, which is a bit awkward. It becomes even more confusing the more function calls you have, especially when they have multiple arguments each.</p>
<p>. . .</p>
<p><strong>Enter the pipe<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>:</strong> <code>|&gt;</code></p>
<p>Pipes read “left to right” which is much more intuitive!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>gapminder<span class="sc">$</span>pop <span class="sc">|&gt;</span> <span class="fu">mean</span>() <span class="sc">|&gt;</span> <span class="fu">log</span>() <span class="sc">|&gt;</span> <span class="fu">sqrt</span>() <span class="sc">|&gt;</span> <span class="fu">median</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="incremental">
<ul class="incremental">
<li>The above code takes what’s on the left-hand side of <code>|&gt;</code> and gives it as the first <strong>unnamed</strong> argument to the first function (<code>mean()</code>).</li>
<li>The result of that function call is then “piped” to the first <strong>unnamed</strong> argument of the second function (<code>log()</code>)…</li>
</ul>
</div>
</section>
<section id="pipes-1" class="level2">
<h2 class="anchored" data-anchor-id="pipes-1">Pipes</h2>
<p>As you can see, pipes allow us to “chain” many function calls together easily.</p>
<p><br>
</p>
<p>. . .</p>
<p>The so-called “native pipe” (i.e.&nbsp;built into base <code>R</code>) is relatively new. Before this, the pipe was a function from the <code>magrittr</code> package that looks like this: <code>%&gt;%</code>.</p>
<p><br>
</p>
<p>. . .</p>
<p>This latter version continues to work but has a different functionality than the new, native pipe.</p>
</section>
<section id="versus" class="level2 smaller page-columns page-full">
<h2 class="smaller anchored" data-anchor-id="versus"><code>%&gt;%</code> versus <code>|&gt;</code></h2>
<p><span style="font-size: 85%;">Most importantly, while both the <code>magrittr</code> pipe and the native pipe take the LHS (left-hand side) and “pipe” it to the RHS (right-hand side), they operate differently when it comes to explicitly specifying which argument of the RHS to pipe the LHS into.</span></p>
<p>. . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Z"</span>, <span class="cn">NA</span>, <span class="st">"C"</span>, <span class="st">"G"</span>, <span class="st">"A"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>. . .</p>
<div class="columns">
<div class="column" style="width:50%;">
<section id="magrittr-pipe" class="level4">
<h4 class="anchored" data-anchor-id="magrittr-pipe"><code>%&gt;%</code> (<code>magrittr</code> pipe)</h4>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-12"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-12" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-12-1" class="code-annotation-target"><a href="#annotated-cell-12-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">%&gt;%</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">'A'</span>,</span>
<span id="annotated-cell-12-2"><a href="#annotated-cell-12-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">replacement =</span> <span class="st">'-'</span>, </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-12" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-12-3" class="code-annotation-target"><a href="#annotated-cell-12-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> .)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-12" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-12" data-code-lines="1" data-code-annotation="1"><code>gsub</code> looks for a regular expression <code>pattern</code> (more on this in <a href="https://vsass.github.io/CSSS508/Lectures/Lecture7/CSSS508_Lecture7_index.html">Week 7</a>) within the specified character vector <code>x</code>, and substitutes it with the specified <code>replacement</code> value.</span>
</dd>
<dt data-target-cell="annotated-cell-12" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-12" data-code-lines="3" data-code-annotation="2">By default, both pipes will pass the LHS to the first argument of the function on the RHS. If you need to pass the LHS to a different argument, i.e.&nbsp;the second, or third, etc., you need to explicitly tell the pipe which argument to pass it to. The placeholder for <code>%&gt;%</code> is <code>.</code> (a period)</span>
</dd>
</dl>
</div>
</div>
<p><br>
</p>
<p><span style="font-size: 85%;">Each of these examples returns:</span></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Z" NA  "C" "G" "-"</code></pre>
</div>
</div>
</section>
</div><div class="column" style="width:50%;">
<section id="native-r-pipe" class="level4">
<h4 class="anchored" data-anchor-id="native-r-pipe"><code>|&gt;</code> (native <code>R</code> pipe)</h4>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-14"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-14" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-14-1" class="code-annotation-target"><a href="#annotated-cell-14-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">|&gt;</span> <span class="fu">gsub</span>(<span class="st">'A'</span>,</span>
<span id="annotated-cell-14-2"><a href="#annotated-cell-14-2" aria-hidden="true" tabindex="-1"></a>          <span class="st">'-'</span>,</span>
<span id="annotated-cell-14-3"><a href="#annotated-cell-14-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">x =</span> _)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-14" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-14-4" class="code-annotation-target"><a href="#annotated-cell-14-4" aria-hidden="true" tabindex="-1"></a>a <span class="sc">|&gt;</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">'A'</span>,</span>
<span id="annotated-cell-14-5"><a href="#annotated-cell-14-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">replacement =</span> <span class="st">'-'</span>)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-14" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-14-6" class="code-annotation-target"><a href="#annotated-cell-14-6" aria-hidden="true" tabindex="-1"></a>a <span class="sc">|&gt;</span> (\(placeholder)</span>
<span id="annotated-cell-14-7"><a href="#annotated-cell-14-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">gsub</span>(<span class="st">'A'</span>,</span>
<span id="annotated-cell-14-8"><a href="#annotated-cell-14-8" aria-hidden="true" tabindex="-1"></a>           <span class="st">'-'</span>,</span>
<span id="annotated-cell-14-9"><a href="#annotated-cell-14-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> placeholder))()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-14" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-14" data-code-lines="1,2,3" data-code-annotation="3"><code>_</code> is the placeholder for <code>|&gt;</code></span>
</dd>
<dt data-target-cell="annotated-cell-14" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-14" data-code-lines="4,5" data-code-annotation="4">Leaving the “piped” argument as the only unnamed argument also works</span>
</dd>
<dt data-target-cell="annotated-cell-14" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-14" data-code-lines="6,7,8,9" data-code-annotation="5">Using an anonymous function call allows you to be explicit while specifying your own placeholder</span>
</dd>
</dl>
</div>
</div>
</section>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>You can read more about the differences between <code>|&gt;</code> and <code>%&gt;%</code> <a href="https://www.tidyverse.org/blog/2023/04/base-vs-magrittr-pipe/#-vs">here</a> and anonymous functions <a href="http://adv-r.had.co.nz/Functional-programming.html#anonymous-functions">here</a>. Code above comes from responses to <a href="https://stackoverflow.com/questions/70598384/piping-second-or-higher-argument-in-native-pipe">this stackoverflow post</a>.</p>
</div></div></section>
<section id="pipes-2" class="level2">
<h2 class="anchored" data-anchor-id="pipes-2">Pipes</h2>
<p>Some good syntax practices:</p>
<div class="incremental">
<ul class="incremental">
<li>You should always put a space before <code>|&gt;</code> and it should usually be the last thing on a line.<br>
</li>
<li>New functions should be on a new line, indented 2 spaces (RStudio will automatically do this for you if you hit return after a pipe)</li>
<li>Named arguments within a function should also get their own line</li>
</ul>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># code goals</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span>  </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(tailnum) <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># code fouls</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> <span class="fu">group_by</span>(tailnum) <span class="sc">|&gt;</span> </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">n =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="selecting-the-native-pipe" class="level2">
<h2 class="anchored" data-anchor-id="selecting-the-native-pipe">Selecting the native pipe</h2>
<p>The <code>|&gt;</code> is recommended over <code>%&gt;%</code> simply because it’s much simpler to use and it’s always available (<code>%&gt;%</code> relied on the <code>magrittr</code> package which was a dependency of <code>tidyverse</code> packages).</p>
<p>. . .</p>
<p>You’ll need to specify to <code>R</code> that you want to enable its usage by going to <em>Tools</em> &gt; <em>Global Options</em> &gt; <em>Code</em>. Within the “Editing” Tab there is an option to “Use native pipe operator, <code>|&gt;</code>”. Check it! <span style="color:#e15759"><i class="fa-solid fa-check" aria-label="check"></i></span></p>
<div class="columns">
<div class="column" style="width:62%;">
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/rstudio-pipe-options.png" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:110.0%"></p>
</figure>
</div>
</div><div class="column" style="width:38%;">
<p><br></p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="color:blue"><i class="fa-solid fa-keyboard" aria-label="keyboard"></i></span> Keyboard Shortcut
</div>
</div>
<div class="callout-body-container callout-body">
<p>To insert a pipe (with spaces) quickly: <strong><em>Ctrl+Shift+M</em></strong> (Windows &amp; Linux OS) <strong><em>Shift+Command+M</em></strong> (Mac)</p>
</div>
</div>
</div>
</div>
</section>
<section id="other-formatting-options" class="level2">
<h2 class="anchored" data-anchor-id="other-formatting-options">Other Formatting Options</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><br></p>
<p>There are some other useful formatting options I’d suggest setting globally and others you can specify to your preferences.</p>
<p><br></p>
<section id="suggested" class="level4">
<h4 class="anchored" data-anchor-id="suggested">Suggested:</h4>
<ul>
<li>Highlight Function Calls</li>
<li>Enable preview of colors<br>
</li>
<li>Rainbow parentheses</li>
</ul>
</section>
</div><div class="column" style="width:60%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/rainbow_function.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="other-formatting-options-1" class="level2">
<h2 class="anchored" data-anchor-id="other-formatting-options-1">Other Formatting Options</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><br></p>
<p>There are some other useful formatting options I’d suggest setting globally and others you can specify to your preferences.</p>
<p><br></p>
<section id="suggested-1" class="level4">
<h4 class="anchored" data-anchor-id="suggested-1">Suggested:</h4>
<ul>
<li><span class="highlight-tableaured">Highlight Function Calls</span></li>
<li>Enable preview of colors<br>
</li>
<li>Rainbow parentheses</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/function_colors.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
</div><div class="column" style="width:60%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/rainbow_function.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="other-formatting-options-2" class="level2">
<h2 class="anchored" data-anchor-id="other-formatting-options-2">Other Formatting Options</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><br></p>
<p>There are some other useful formatting options I’d suggest setting globally and others you can specify to your preferences.</p>
<p><br></p>
<section id="suggested-2" class="level4">
<h4 class="anchored" data-anchor-id="suggested-2">Suggested:</h4>
<ul>
<li>Highlight Function Calls</li>
<li><span class="highlight-tableaured">Enable preview of colors</span></li>
<li>Rainbow parentheses</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/colors.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:55.0%"></p>
</figure>
</div>
</section>
</div><div class="column" style="width:60%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/rainbow_function.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="other-formatting-options-3" class="level2">
<h2 class="anchored" data-anchor-id="other-formatting-options-3">Other Formatting Options</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><br></p>
<p>There are some other useful formatting options I’d suggest setting globally and others you can specify to your preferences.</p>
<p><br></p>
<section id="suggested-3" class="level4">
<h4 class="anchored" data-anchor-id="suggested-3">Suggested:</h4>
<ul>
<li>Highlight Function Calls</li>
<li>Enable preview of colors</li>
<li><span class="highlight-tableaured">Rainbow parentheses</span></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/parentheses.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></p>
</figure>
</div>
</section>
</div><div class="column" style="width:60%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/rainbow_function.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="other-formatting-options-4" class="level2">
<h2 class="anchored" data-anchor-id="other-formatting-options-4">Other Formatting Options</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><br></p>
<p>There are some other useful formatting options I’d suggest setting globally and others you can specify to your preferences.</p>
<p><br></p>
<section id="up-to-you" class="level4">
<h4 class="anchored" data-anchor-id="up-to-you">Up to you:</h4>
<ul>
<li>Code highlight style</li>
</ul>
</section>
</div><div class="column" style="width:60%;">
<p><img src="images/code_style.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="other-formatting-options-5" class="level2">
<h2 class="anchored" data-anchor-id="other-formatting-options-5">Other Formatting Options</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><br></p>
<p>There are some other useful formatting options I’d suggest setting globally and others you can specify to your preferences.</p>
<p><br></p>
<section id="up-to-you-1" class="level4">
<h4 class="anchored" data-anchor-id="up-to-you-1">Up to you:</h4>
<ul>
<li>Pane layout</li>
</ul>
</section>
</div><div class="column" style="width:60%;">
<p><img src="images/pane_arrangement.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="other-formatting-options-6" class="level2">
<h2 class="anchored" data-anchor-id="other-formatting-options-6">Other Formatting Options</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><br></p>
<p>There are some other useful formatting options I’d suggest setting globally and others you can specify to your preferences.</p>
<p><br></p>
<section id="up-to-you-2" class="level4">
<h4 class="anchored" data-anchor-id="up-to-you-2">Up to you:</h4>
<ul>
<li>Markdown options
<ul>
<li>Output preview</li>
<li>Inline output</li>
</ul></li>
</ul>
</section>
</div><div class="column" style="width:60%;">
<p><img src="images/markdown_preferences.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="styling-existing-code" class="level2">
<h2 class="anchored" data-anchor-id="styling-existing-code">Styling existing code</h2>
<p>Imagine you’ve inherited a bunch of code from someone else and NOTHING is styled in the <code>tidyverse</code> way you’ve become accustomed. Or, you’ve dabbled in <code>R</code> before and you have some old code that is all over the place, with respect to styling.</p>
<p>. . .</p>
<p>Thanks to Lorenz Walthert there’s a package for that! Using the <a href="https://styler.r-lib.org/index.html"><code>styler</code> package</a> you can automatically apply the <a href="https://style.tidyverse.org/"><code>tidyverse</code> style guide</a> standards to various filetypes (.R, .qmd, .Rmd, etc.) or even entire projects.</p>
<p>. . .</p>
<p>Have a style or variation of the <code>tidyverse</code> style that you prefer? You can specify that in the package as well. Use the keyboard shortcut <em>Cmd</em>/<em>Ctl</em> + <em>Shift</em> + <em>P</em> and search for “styler” to see all the options available.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/rstudio-styler.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
</section>
</section>
<section id="workflow" class="level1 section-title page-columns page-full" data-background-color="#99a486">
<h1 class="section-title" data-background-color="#99a486">Workflow</h1>
<section id="r-scripts" class="level2">
<h2 class="anchored" data-anchor-id="r-scripts">.R scripts</h2>
<p>We’ve been working with Quarto documents but you’ll sometimes simply want to use an R script, which is basically an entire file that is just a code chunk.</p>
<p>. . .</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Why would you prefer an .R file over a .qmd file?</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">When might you use a .qmd file?</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<ul>
<li>You just need to run code, without the need for accompanying text output and plots in the same document. Examples include:
<ul>
<li>Reading in and cleaning/manipulating your data before analysis</li>
<li>Writing functions you’ll use throughout your project</li>
<li>Getting descriptive statistics/making descriptive plots of data</li>
<li>Running models and generating tables/plots of their results</li>
</ul></li>
</ul>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<ul>
<li>Homework assignments (like for this class) that require you to show code, describe your process for arriving at your solution, and include any results (i.e.&nbsp;tables, statistics, visualizations)</li>
<li>Academic articles</li>
<li>Presentations for class, conferences, talks, etc.</li>
<li>Theses/dissertations</li>
<li>Interactive visualizations (i.e.&nbsp;widgets)</li>
<li>Building your own website</li>
</ul>
</div>
</div>
</div>
</section>
<section id="file-naming" class="level2">
<h2 class="anchored" data-anchor-id="file-naming">File naming</h2>
<p>File names should:</p>
<p>. . .</p>
<ul>
<li>be machine readable: avoid spaces, symbols, and special characters. Don’t rely on case sensitivity to distinguish files.</li>
<li>be human readable: use file names to describe what’s in the file.</li>
<li>play well with default ordering: start file names with numbers so that alphabetical sorting puts them in the order they get used.</li>
</ul>
</section>
<section id="organization-and-portability" class="level2">
<h2 class="anchored" data-anchor-id="organization-and-portability">Organization and Portability</h2>
<p>Organizing research projects is something you either do accidentally — and badly — or purposefully with some upfront labor.</p>
<p>. . .</p>
<p>Uniform organization makes switching between or revisiting projects easier.</p>
<p>. . .</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Good Example directory</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Bad Example directory</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="columns">
<div class="column" style="width:50%;">
<pre><code>project/
   readme.md
   data/
     derived/
       data_processed.RData
     raw/
       data_core.csv
       data_supplementary.csv
   docs/
     paper_asa.qmd
     paper_journal.qmd
   syntax/
     01-functions.R
     02-cleaning.R
     03_merging.R
     04-exploratory.R
     05-models.R
     06-visualizations.R
   visuals/ 
     descriptive.png
     heatmap.png
     predicted_probabilities.png</code></pre>
</div><div class="column" style="width:50%;">
<div class="incremental small1">
<ol class="incremental" type="1">
<li>There is a clear hierarchy
<ul class="incremental">
<li>Written content is in <code>docs</code></li>
<li>Code is in <code>syntax</code></li>
<li>Data is in <code>data</code></li>
<li>Visualizations are in <code>visuals</code></li>
<li>The <code>readme.md</code> describes the project</li>
</ul></li>
<li>Naming is uniform
<ul class="incremental">
<li>All lower case</li>
<li>Words separated by underscores</li>
</ul></li>
<li>Names are self-descriptive</li>
<li>Numbering scripts makes it clear in which order they should be run.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="columns">
<div class="column" style="width:40%;">
<pre><code>alternative model.R
code for exploratory analysis.r
finalreport.qmd
FinalReport.qmd
fig 1.png
Figure_02.png
model_first_try.R
run-first.r
temp.txt</code></pre>
</div><div class="column" style="width:60%;">
<div class="incremental">
<ul class="incremental">
<li>Ordering of the files is unclear</li>
<li>Inconsistent naming is confusing (which final report is THE final report?)</li>
<li>Non-descriptive naming means more work for you in trying to decipher its contents</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="working-directory" class="level2">
<h2 class="anchored" data-anchor-id="working-directory">Working directory</h2>
<p>Your <strong>working directory</strong> is where <code>R</code> will look for any files that you ask it to load and where it’ll put anything you ask it to save. It is literally just a folder somewhere on your computer or the remote server/cloud you’re working within.</p>
<p>. . .</p>
<p>You can ask <code>R</code> what your current working directory is by running <code>getwd()</code> (<code>get</code> <code>w</code>orking <code>d</code>irectory).</p>
<p>. . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/victoriasass/Desktop/GitHub/CSSS508/Lectures/Lecture3"</code></pre>
</div>
</div>
<p>You can see above that this lecture was created in a lecture-specific folder within a lectures folder, in a directory for this class, which is in a folder called <code>GitHub</code> on the Desktop of my laptop.</p>
<p>. . .</p>
<p>While you can <em>technically</em> set your working directory using <code>setwd()</code> (<code>set</code> <code>w</code>orking <code>d</code>irectory) and giving <code>R</code> a filepath, in the name of reproducible research DO NOT DO THIS! I strongly advise an alternative: <strong>RStudio Projects</strong>.</p>
</section>
<section id="projects" class="level2">
<h2 class="anchored" data-anchor-id="projects">Projects</h2>
<p>A “project” is RStudio’s built-in organizational support system which keeps all the files associated with a given project (i.e.&nbsp;data, R scripts, figures, results) together in one directory.</p>
<p>. . .</p>
<p>Creating a new project quite basically creates a new folder in a place that you specify. But it also does a few of other extremely useful things:</p>
<div class="incremental">
<ul class="incremental">
<li>Creates a <code>.Rproj</code> file which tracks your command history and all the files in your project folder.</li>
<li>Contains all the files needed to reproduce your work
<ul class="incremental">
<li>i.e.&nbsp;you can send a project folder to someone and they will be able to run it on their local machine</li>
</ul></li>
<li>Facilitates version control with built-in git/GitHub connection <em>(more on this later in the course)</em></li>
</ul>
</div>
</section>
<section id="creating-an-rstudio-project" class="level2">
<h2 class="anchored" data-anchor-id="creating-an-rstudio-project">Creating an RStudio Project</h2>
<div class="columns">
<div class="column" style="width:65%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/new-project.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div><div class="column" style="width:35%;">
<p>You can create a project by clicking</p>
<ul>
<li><em>File</em> &gt; <em>New Project…</em></li>
<li><span>  </span> <img src="images/rproject_icon.png" class="absolute img-fluid" data-top="200"> in the upper-left corner of RStudio</li>
<li>the dropdown menu in the upper-right corner of RStudio and selecting <em>New Project…</em></li>
</ul>
</div>
</div>
</section>
<section id="workflow-versus-product" class="level2">
<h2 class="anchored" data-anchor-id="workflow-versus-product">Workflow versus Product</h2>
<p>To summarize Jenny Bryan, <a href="https://www.tidyverse.org/articles/2017/12/workflow-vs-script/">one should <strong>separate workflow</strong> (i.e.&nbsp;your personal tastes and habits) <strong>from product</strong> (i.e.&nbsp;the logic and output that is the essence of your project).</a></p>
<p><br></p>
<p>. . .</p>
<div class="columns">
<div class="column" style="width:50%;">
<section id="workflow-1" class="level3">
<h3 class="anchored" data-anchor-id="workflow-1">Workflow</h3>
<ul>
<li><p>The software you use to write your code (e.g.&nbsp;R/RStudio)</p></li>
<li><p>The location you store a project</p></li>
<li><p>The specific computer you use</p></li>
<li><p>The code you ran earlier or typed into your console</p></li>
</ul>
</section>
</div><div class="column" style="width:50%;">
<section id="product" class="level3">
<h3 class="anchored" data-anchor-id="product">Product</h3>
<ul>
<li><p>The raw data</p></li>
<li><p>The code that operates on your raw data</p></li>
<li><p>The packages you use</p></li>
<li><p>The output files or documents</p></li>
</ul>
</section>
</div>
</div>
<p>. . .</p>
<p>Each data analysis (<em>or course using R</em>) should be organized as a <span class="highlight-tableaured"><strong>project</strong></span>.</p>
<ul>
<li>Projects <em>should NOT modify anything outside of the project</em> nor need to be modified by someone else (or future you) to run.</li>
<li><strong>Projects <em>should be independent of your workflow</em>.</strong></li>
</ul>
</section>
<section id="portability" class="level2">
<h2 class="anchored" data-anchor-id="portability">Portability</h2>
<p>For research to be reproducible, it must also be <em>portable</em>. Portable software operates <em>independently of workflow</em>.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true"><strong>Do Not:</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false"><strong>Do:</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<ul>
<li>Use <code>setwd()</code>.</li>
<li>Use <em>absolute paths</em> except for <em>fixed, immovable sources</em> (secure data).
<ul>
<li><code>read_csv("C:/my_project/data/my_data.csv")</code></li>
</ul></li>
<li>Use <code>install.packages()</code> in <code>R</code> script or .qmd files.</li>
<li>Use <code>rm(list=ls())</code> anywhere but your console.</li>
</ul>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Use RStudio projects (or the <a href="https://github.com/jennybc/here_here"><code>here</code> package</a>) to set directories.</li>
<li>Use <em>relative paths</em> to load and save files:
<ul>
<li><code>read_csv("./data/my_data.csv")</code></li>
</ul></li>
<li>Load all required packages using <code>library()</code>.</li>
<li>Clear your workspace when closing RStudio.
<ul>
<li>Set <em>Tools &gt; Global Options… &gt; Save workspace…</em> to <strong>Never</strong></li>
</ul></li>
</ul>
</div><div class="column" style="width:50%;">
<p><img src="images/clean-slate.png" class="absolute" style="height:75.0%" data-right="10" data-bottom="10"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="psa-setwd-and-rmlistls" class="level2">
<h2 class="anchored" data-anchor-id="psa-setwd-and-rmlistls">PSA: <code>setwd()</code> and <code>rm(list=ls())</code></h2>
<p><br></p>
<p>. . .</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="color:orange"><i class="fa-solid fa-triangle-exclamation" aria-label="triangle-exclamation"></i></span> <code>setwd()</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Setting your working directory using <code>setwd()</code> makes it impossible for your project to be replicated by anyone but you, and only on the exact same computer on which it was created.</p>
</div>
</div>
<p>. . .</p>
<p><br></p>
<div class="callout callout-style-default callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="color:red"><i class="fa-solid fa-circle-exclamation" aria-label="circle-exclamation"></i></span> <code>rm(list=ls())</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Make sure not to expect <code>rm(list=ls())</code> to give you a fresh <code>R</code> session. It may feel that way when all the objects in your global environment disappear but there are a host of dependencies (i.e.&nbsp;loaded packages, options set to non-defaults, the working directory) that have not changed. Your script will still be vulnerable to those settings unless you start a fresh <code>R</code> session.</p>
</div>
</div>
</section>
<section id="file-paths" class="level2">
<h2 class="anchored" data-anchor-id="file-paths">File paths</h2>
<p>A file path specifies the location of a file in a computer’s file system structure. They can be used to locate files and web resources. Some important things to note:</p>
<div class="incremental">
<ul class="incremental">
<li>For file systems, each level in the hierarchy is a directory
<ul class="incremental">
<li>For URLs, each level in the hierarchy is a page.</li>
</ul></li>
<li>A path is a string of characters which specifies a unique location in a directory or page hierarchy.</li>
<li>Different sections of the path are separated by a path separator, such as a forward slash (<code>/</code>).
<ul class="incremental">
<li>These different sections represent the separate directories or pages in the hierarchy.</li>
</ul></li>
<li>In Unix-based operating systems, such as Linux or macOS, the path separator is a forward slash (<code>/</code>).
<ul class="incremental">
<li>In Windows, the path separator is a back slash (<code>\</code>).</li>
<li>URLs follow a standard format that always uses a forward slash (<code>/</code>) as the path separator regardless of the operating system.</li>
</ul></li>
</ul>
</div>
</section>
<section id="absolute-versus-relative-paths" class="level2">
<h2 class="anchored" data-anchor-id="absolute-versus-relative-paths">Absolute Versus Relative Paths</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Absolute</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Relative</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p>Specifies the location of a file from the root directory in the file system structure. They are also called “full file paths” or “full paths.”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="st">"/Users/victoriasass/Desktop/GitHub/CSSS508/Lectures/Lecture3/CSSS508_Lecture3.qmd"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="fragment">
<p>In Linux, the <code>~</code> is commonly used to represent a user’s home directory, i.e.:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="st">"~/Desktop/GitHub/CSSS508/Lectures/Lecture3/CSSS508_Lecture3.qmd"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<p>Specifies the location of a file in the same folder or on the same server. In other words, a relative file path specifies a location of a file that is relative to the current directory.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="st">"./CSSS508_Lecture3.qmd"`</span><span class="at"> or </span><span class="st">`"CSSS508_Lecture3.qmd"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="fragment">
<p>Relative file paths use a dot notation at the start of the path, followed by a path separator and the location of the file.</p>
<ul>
<li>A single dot (<code>.</code>) indicates the current directory (as shown above)</li>
<li>A double dot (<code>..</code>) indicates the parent directory.</li>
</ul>
</div>
<div class="fragment">
<p>For example, if I wanted to reference the syllabus (which is in the main project folder <code>CSSS508</code>) from my current folder <code>Lecture3</code> I would write:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="st">"../../syllabus.qmd"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="paths-and-projects" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="paths-and-projects">Paths and Projects</h2>
<p>When you work in an RStudio Project your <em>working directory</em> is the project folder.</p>
<p>. . .</p>
<p>If you are working on a <code>R</code> script or qmd file in a subfolder of this project, the working directory of that file will be its subfolder (not the project folder.</p>
<p>. . .</p>
<p>Keep this in mind when you’re writing code and testing it interactively! Your current working directory will be the project folder when running code interactively even if you’re writing code for a qmd that has a subfolder as the working directory.</p>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>This is only relevant when using file paths (obviously). The most common uses of file paths in an <code>R</code> script or qmd is to read in or write data, and to save plots and tables.</p>
</div></div></section>
<section id="divide-and-conquer" class="level2">
<h2 class="anchored" data-anchor-id="divide-and-conquer">Divide and Conquer</h2>
<p>Often you do not want to include all code for a project in one <code>.qmd</code> file:</p>
<ul>
<li>The code takes too long to knit.</li>
<li>The file is so long it is difficult to read.</li>
</ul>
<p>. . .</p>
<p>There are two ways to deal with this:</p>
<ol type="1">
<li><p>Use separate <code>.R</code> scripts or <code>.qmd</code> files which save results from complicated parts of a project, then load these results in the main <code>.qmd</code> file.</p>
<ul>
<li>This is good for loading and cleaning large data.</li>
<li>Also for running slow models.</li>
</ul></li>
</ol>
<p>. . .</p>
<ol start="2" type="1">
<li><p>Use <code>source()</code> to run external <code>.R</code> scripts when the <code>.qmd</code> renders</p>
<ul>
<li>This can be used to run large files that aren’t impractically slow.</li>
<li>Also good for loading project-specific functions.</li>
</ul></li>
</ol>
</section>
<section id="the-way-of-many-files" class="level2">
<h2 class="anchored" data-anchor-id="the-way-of-many-files">The Way of Many Files</h2>
<p>I find it beneficial to break projects into <em>many</em> files:</p>
<ul>
<li>Scripts with specialized functions.</li>
<li>Scripts to load and clean each set of variables.</li>
<li>Scripts to run each set of models and make tables and plots.</li>
<li>A main .qmd that runs some or all of these to reproduce the entire project.</li>
</ul>
<p>. . .</p>
<p>Splitting up a project carries benefits:</p>
<ul>
<li>Once a portion of the project is done and in its own file, <em>it is out of your way.</em></li>
<li>If you need to make changes, you don’t need to search through huge files.</li>
<li>Entire sections of the project can be added or removed quickly (e.g.&nbsp;converted to an appendix of an article)</li>
<li><strong>It is the only way to build a proper <em>pipeline</em> for a project. </strong></li>
</ul>
</section>
<section id="pipelines" class="level2">
<h2 class="anchored" data-anchor-id="pipelines">Pipelines</h2>
<p>Professional researchers and teams design projects as a <strong>pipeline</strong>.</p>
<p>. . .</p>
<p>A <strong>pipeline</strong> is a series of consecutive processing elements (scripts and functions in R).</p>
<p>. . .</p>
<p>Each stage of a pipeline…</p>
<ol type="1">
<li>Has clearly defined inputs and outputs</li>
<li>Does not modify its inputs.</li>
<li>Produces the exact same output every time it is re-run.</li>
</ol>
<p>. . .</p>
<p>This means…</p>
<ol type="1">
<li>When you modify one stage, you only need to rerun <em>subsequent stages</em>.</li>
<li>Different people can work on each stage.</li>
<li>Problems are isolated within stages.</li>
<li>You can depict your project as a <em>directed graph</em> of <strong>dependencies</strong>.</li>
</ol>
</section>
<section id="example-pipeline" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="example-pipeline">Example Pipeline</h2>
<p>Every stage (oval) has an unambiguous input and output. Everything that precedes a given stage is a <strong>dependency</strong> — something required to run it.</p>
<p><img src="images/pipeline.svg" class="img-fluid"></p>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>Note: <a href="https://docs.ropensci.org/targets/"><code>targets</code> is a great package for managing R research pipelines.</a></p>
</div></div></section>
</section>
<section id="lab-3" class="level1 section-title page-columns page-full" data-background-color="#99a486">
<h1 class="section-title" data-background-color="#99a486">Lab 3</h1>
<section id="section" class="level2" data-menu-title="Lab Exercises">
<h2 data-menu-title="Lab Exercises" class="anchored" data-anchor-id="section"></h2>
<ol type="1">
<li><p>If you haven’t already, go to <em>Tools</em> &gt; <em>Global Options</em> and adjust your settings (i.e.&nbsp;<em>General</em>, <em>Code</em> &gt; <em>Editing</em>, and <em>Code</em> &gt; <em>Display</em>) to those recommended in the lecture and any others that you’d like to change (i.e.&nbsp;<em>Appearance</em>, <em>Pane Layout</em>, or <em>R Markdown</em>)</p></li>
<li><p>Restyle the following pipelines following the guidelines discussed in lecture:</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>flights<span class="sc">|&gt;</span><span class="fu">filter</span>(dest<span class="sc">==</span><span class="st">"IAH"</span>)<span class="sc">|&gt;</span><span class="fu">group_by</span>(year,month,day)<span class="sc">|&gt;</span><span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>(),</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="at">delay=</span><span class="fu">mean</span>(arr_delay,<span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">|&gt;</span><span class="fu">filter</span>(n<span class="sc">&gt;</span><span class="dv">10</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>flights<span class="sc">|&gt;</span><span class="fu">filter</span>(carrier<span class="sc">==</span><span class="st">"UA"</span>,dest<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"IAH"</span>,<span class="st">"HOU"</span>),sched_dep_time<span class="sc">&gt;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="dv">0900</span>,sched_arr_time<span class="sc">&lt;</span><span class="dv">2000</span>)<span class="sc">|&gt;</span><span class="fu">group_by</span>(flight)<span class="sc">|&gt;</span><span class="fu">summarize</span>(<span class="at">delay=</span><span class="fu">mean</span>(</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>arr_delay,<span class="at">na.rm=</span><span class="cn">TRUE</span>),<span class="at">cancelled=</span><span class="fu">sum</span>(<span class="fu">is.na</span>(arr_delay)),<span class="at">n=</span><span class="fu">n</span>())<span class="sc">|&gt;</span><span class="fu">filter</span>(n<span class="sc">&gt;</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><p>Press <em>Option</em> + <em>Shift</em> + <em>K</em> / <em>Alt</em> + <em>Shift</em> + <em>K</em>. What happens? How can you get to the same place using the menus?</p></li>
<li><p>Tweak each of the following R commands so that they run correctly:</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">libary</span>(todyverse)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">dTA =</span> mpg) <span class="sc">+</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">maping =</span> <span class="fu">aes</span>(<span class="at">x =</span> displ <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="5" type="1">
<li>What might be a good way to organize your homework assignments for this class?</li>
</ol>
</section>
<section id="solution-1.-adjust-settings" class="level2" data-visibility="hidden">
<h2 data-visibility="hidden" class="anchored" data-anchor-id="solution-1.-adjust-settings">Solution: 1. Adjust settings</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clean-slate.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Clear .RData, Never save</figcaption>
</figure>
</div>
</section>
<section id="solution-1.-adjust-settings-1" class="level2" data-visibility="hidden">
<h2 data-visibility="hidden" class="anchored" data-anchor-id="solution-1.-adjust-settings-1">Solution: 1. Adjust settings</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/rstudio-pipe-options.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Native pipe</figcaption>
</figure>
</div>
</section>
<section id="solution-1.-adjust-settings-2" class="level2" data-visibility="hidden">
<h2 data-visibility="hidden" class="anchored" data-anchor-id="solution-1.-adjust-settings-2">Solution: 1. Adjust settings</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/rainbow_function.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Highlight function calls; preview colors; rainbow parentheses</figcaption>
</figure>
</div>
</section>
<section id="solution-1.-adjust-settings-3" class="level2" data-visibility="hidden">
<h2 data-visibility="hidden" class="anchored" data-anchor-id="solution-1.-adjust-settings-3">Solution: 1. Adjust settings</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/code_style.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Code appearance</figcaption>
</figure>
</div>
</section>
<section id="solution-1.-adjust-settings-4" class="level2" data-visibility="hidden">
<h2 data-visibility="hidden" class="anchored" data-anchor-id="solution-1.-adjust-settings-4">Solution: 1. Adjust settings</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pane_arrangement.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Pane Layout</figcaption>
</figure>
</div>
</section>
<section id="solution-1.-adjust-settings-5" class="level2" data-visibility="hidden">
<h2 data-visibility="hidden" class="anchored" data-anchor-id="solution-1.-adjust-settings-5">Solution: 1. Adjust settings</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/markdown_preferences.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Markdown Preferences</figcaption>
</figure>
</div>
</section>
<section id="solution-2.-readable-code-style" class="level2" data-visibility="hidden">
<h2 data-visibility="hidden" class="anchored" data-anchor-id="solution-2.-readable-code-style">Solution: 2. Readable code style</h2>
<div class="fragment semi-fade-out" data-fragment-index="1">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>flights<span class="sc">|&gt;</span><span class="fu">filter</span>(dest<span class="sc">==</span><span class="st">"IAH"</span>)<span class="sc">|&gt;</span><span class="fu">group_by</span>(year,month,day)<span class="sc">|&gt;</span><span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>(),</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="at">delay=</span><span class="fu">mean</span>(arr_delay,<span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">|&gt;</span><span class="fu">filter</span>(n<span class="sc">&gt;</span><span class="dv">10</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>flights<span class="sc">|&gt;</span><span class="fu">filter</span>(carrier<span class="sc">==</span><span class="st">"UA"</span>,dest<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"IAH"</span>,<span class="st">"HOU"</span>),sched_dep_time<span class="sc">&gt;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="dv">0900</span>,sched_arr_time<span class="sc">&lt;</span><span class="dv">2000</span>)<span class="sc">|&gt;</span><span class="fu">group_by</span>(flight)<span class="sc">|&gt;</span><span class="fu">summarize</span>(<span class="at">delay=</span><span class="fu">mean</span>(</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>arr_delay,<span class="at">na.rm=</span><span class="cn">TRUE</span>),<span class="at">cancelled=</span><span class="fu">sum</span>(<span class="fu">is.na</span>(arr_delay)),<span class="at">n=</span><span class="fu">n</span>())<span class="sc">|&gt;</span><span class="fu">filter</span>(n<span class="sc">&gt;</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-in" data-fragment-index="1">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dest <span class="sc">==</span> <span class="st">"IAH"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, month, day) <span class="sc">|&gt;</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">10</span>)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(carrier <span class="sc">==</span> <span class="st">"UA"</span>, dest <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"IAH"</span>, <span class="st">"HOU"</span>), </span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>         sched_dep_time <span class="sc">&gt;</span> <span class="dv">0900</span>, sched_arr_time <span class="sc">&lt;</span> <span class="dv">2000</span>) <span class="sc">|&gt;</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(flight) <span class="sc">|&gt;</span> </span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">cancelled =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(arr_delay)), </span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>() </span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="solution-3.-option-shift-k-alt-shift-k" class="level2 page-columns page-full" data-visibility="hidden">
<h2 data-visibility="hidden" class="anchored" data-anchor-id="solution-3.-option-shift-k-alt-shift-k">Solution: 3. <em>Option</em> + <em>Shift</em> + <em>K</em> / <em>Alt</em> + <em>Shift</em> + <em>K</em></h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/keyboard_shortcuts.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>You can find the same quick reference pop-up by clicking <em>Tools</em> &gt; <em>Keyboard Shortcuts Help</em>.</p>
</div></div></section>
<section id="solution-4.-keyboard-shortcut" class="level2" data-visibility="hidden">
<h2 data-visibility="hidden" class="anchored" data-anchor-id="solution-4.-keyboard-shortcut">Solution: 4. Keyboard shortcut</h2>
<div class="fragment semi-fade-out" data-fragment-index="1">
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">libary</span>(todyverse)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">dTA =</span> mpg) <span class="sc">+</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">maping =</span> <span class="fu">aes</span>(<span class="at">x =</span> displ <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p><br>
</p>
<div class="fragment fade-in" data-fragment-index="1">
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">libary</span>(tidyverse)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="solution-5.-organizing-a-class" class="level2" data-visibility="hidden">
<h2 data-visibility="hidden" class="anchored" data-anchor-id="solution-5.-organizing-a-class">Solution: 5. Organizing a class</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><br></p>
<div class="incremental">
<ol class="incremental" type="1">
<li>Create a folder for this class on a computer/system that gets backed up regularly</li>
<li>Either the class itself is an RStudio project or each homework assignment subfolder is a separate project</li>
<li>Everything within each homework assignment project gets saved into that specific folder (or a subfolder of that folder)</li>
<li>Anything required for each homework assignment (e.g.&nbsp;downloaded data) is saved into its project-specific folder</li>
</ol>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment">
<p><br></p>
<pre><code>CSSS508/
   Homeworks/
     HW1/
       homework1.qmd
       homework1.html
     HW2/
       homework2.qmd
       homework2.html
     HW3/
       homework3.qmd
       homework3.html
     HW4/
       homework4.qmd
       homework4.html
       data.csv
     HW5/
       homework5.qmd
       homework5.html
         data/
           data_raw.csv
           data_processed.Rdata
     HW6/
     HW7/
     HW8/
     HW9/</code></pre>
</div>
</div>
</div>
</section>
</section>
<section id="break" class="level1 section-title" data-background-color="#1e4655">
<h1 class="section-title" data-background-color="#1e4655">Break!</h1>
</section>
<section id="reproducible-research" class="level1 section-title" data-background-color="#99a486">
<h1 class="section-title" data-background-color="#99a486">Reproducible Research</h1>
<section id="why-reproducibility" class="level2">
<h2 class="anchored" data-anchor-id="why-reproducibility">Why Reproducibility?</h2>
<p>Reproducibility is not <em>replication</em>.</p>
<ul>
<li><strong>Replication</strong> is running a new study to show if and how results of a prior study hold.</li>
<li><strong>Reproducibility</strong> is about rerunning <em>the same study</em> and getting the <em>same results</em>.</li>
</ul>
<p>. . .</p>
<p>Reproducible studies can still be <em>wrong</em>… and in fact reproducibility makes proving a study wrong <em>much easier</em>.</p>
<p>. . .</p>
<p><br>
</p>
<p>Reproducibility means:</p>
<ul>
<li>Transparent research practices.</li>
<li>Minimal barriers to verifying your results.</li>
</ul>
<p>. . .</p>
<p><em>Any study that isn’t reproducible can only be trusted on faith.</em></p>
</section>
<section id="reproducibility-definitions" class="level2">
<h2 class="anchored" data-anchor-id="reproducibility-definitions">Reproducibility Definitions</h2>
<p>Reproducibility comes in three forms (Stodden 2014):</p>
<div class="incremental">
<ol class="incremental" type="1">
<li><strong>Empirical:</strong> Repeatability in data collection.</li>
<li><strong>Statistical:</strong> Verification with alternate methods of inference.</li>
<li><strong>Computational:</strong> Reproducibility in cleaning, organizing, and presenting data and results.</li>
</ol>
</div>
<p>. . .</p>
<p>R is particularly well suited to enabling <strong>computational reproducibility</strong><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<p>. . .</p>
<p>They will not fix flawed research design, nor offer a remedy for improper application of statistical methods.</p>
<p>Those are the difficult, non-automatable things you want skills in.</p>
</section>
<section id="computational-reproducibility" class="level2">
<h2 class="anchored" data-anchor-id="computational-reproducibility">Computational Reproducibility</h2>
<p>Elements of computational reproducibility:</p>
<p>. . .</p>
<ul>
<li>Shared data
<ul>
<li>Researchers need your original data to verify and replicate your work.</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li>Shared code
<ul>
<li>Your code must be shared to make decisions transparent.</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li>Documentation
<ul>
<li>The operation of code should be either self-documenting or have written descriptions to make its use clear.</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li>Version Control<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>
<ul>
<li>Documents the research process.</li>
<li>Prevents losing work and facilitates sharing.</li>
</ul></li>
</ul>
</section>
<section id="levels-of-reproducibility" class="level2">
<h2 class="anchored" data-anchor-id="levels-of-reproducibility">Levels of Reproducibility</h2>
<p>For academic papers, degrees of reproducibility vary:</p>
<div class="incremental">
<ol class="incremental" start="0" type="1">
<li>“Read the article”</li>
<li>Shared data with documentation</li>
<li>Shared data and all code</li>
<li>Interactive document<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></li>
<li>Research compendium<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></li>
<li>Docker compendium<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>: Self-contained ecosystem</li>
</ol>
</div>
</section>
<section id="interactive-documents" class="level2">
<h2 class="anchored" data-anchor-id="interactive-documents">Interactive Documents</h2>
<p>Interactive documents — like Quarto docs — combine code and text together into a self-contained document.</p>
<ul>
<li>Load and process data</li>
<li>Run models</li>
<li>Generate tables and plots in-line with text</li>
<li>In-text values automatically filled in</li>
</ul>
<p>. . .</p>
<p>Interactive documents allow a reader to examine your computational methods within the document itself; in effect, they are self-documenting.</p>
<p>. . .</p>
<p>By re-running the code, they reproduce your results on demand.</p>
<p>. . .</p>
<p>Common Platforms:</p>
<ul>
<li><strong>R:</strong> Quarto</li>
<li><strong>Python:</strong> Jupyter Notebooks</li>
</ul>
</section>
</section>
<section id="useful-base-r" class="level1 section-title" data-background-color="#99a486">
<h1 class="section-title" data-background-color="#99a486">Useful Base R</h1>
<section id="selecting-from-vectors-with" class="level2">
<h2 class="anchored" data-anchor-id="selecting-from-vectors-with">Selecting from vectors with <code>[</code></h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>Given a vector<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> of values:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">a =</span> <span class="st">"one"</span>, </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">b =</span> <span class="cn">NA</span>, </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">c =</span> <span class="st">"two"</span>, </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">d =</span> <span class="st">"three"</span>, </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">e =</span> <span class="st">"four"</span>, </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">f =</span> <span class="cn">NA</span>, </span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">g =</span> <span class="cn">NA</span>, </span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">h =</span> <span class="st">"five"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<p>You can select from the vector</p>
<div class="fragment">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-28"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-28" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-28-1" class="code-annotation-target"><a href="#annotated-cell-28-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">5</span>)]</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-28" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-28" data-code-lines="1" data-code-annotation="1">With positive integers</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     c      a      e 
 "two"  "one" "four" </code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-30"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-30" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-30-1" class="code-annotation-target"><a href="#annotated-cell-30-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">3</span>)]</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-30" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-30" data-code-lines="1" data-code-annotation="2">Even repeated values</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     c      a      a      e      c 
 "two"  "one"  "one" "four"  "two" </code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-32"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-32" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-32-1" class="code-annotation-target"><a href="#annotated-cell-32-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="sc">-</span><span class="dv">6</span>, <span class="sc">-</span><span class="dv">7</span>)]</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-32" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-32" data-code-lines="1" data-code-annotation="3">With negative integers (removes these elements from the vector)</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>      a       c       d       e       h 
  "one"   "two" "three"  "four"  "five" </code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-34"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-34" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-34-1" class="code-annotation-target"><a href="#annotated-cell-34-1" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">!</span><span class="fu">is.na</span>(x)]</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-34" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-34" data-code-lines="1" data-code-annotation="4">With a logical vector</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>      a       c       d       e       h 
  "one"   "two" "three"  "four"  "five" </code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-36"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-36" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-36-1" class="code-annotation-target"><a href="#annotated-cell-36-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="st">"c"</span>, <span class="st">"h"</span>)]</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-36" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-36" data-code-lines="1" data-code-annotation="5">Or with a named vector</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     c      h 
 "two" "five" </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="selecting-from-dataframes-with" class="level2">
<h2 class="anchored" data-anchor-id="selecting-from-dataframes-with">Selecting from dataframes with <code>[</code></h2>
<p>You can select rows and columns from dataframes with <code>df[rows, cols]</code>.</p>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-38"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-38-1"><a href="#annotated-cell-38-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="annotated-cell-38-2"><a href="#annotated-cell-38-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, </span>
<span id="annotated-cell-38-3"><a href="#annotated-cell-38-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"e"</span>, <span class="st">"f"</span>), </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-38" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-38-4" class="code-annotation-target"><a href="#annotated-cell-38-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">z =</span> <span class="fu">runif</span>(<span class="dv">3</span>)</span>
<span id="annotated-cell-38-5"><a href="#annotated-cell-38-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="annotated-cell-38-6"><a href="#annotated-cell-38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-38-7"><a href="#annotated-cell-38-7" aria-hidden="true" tabindex="-1"></a>df</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-38" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-38" data-code-lines="4" data-code-annotation="1">defaults: <code>min = 0</code>, <code>max = 1</code></span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
      x y         z
  &lt;int&gt; &lt;chr&gt; &lt;dbl&gt;
1     1 a     0.594
2     2 e     0.169
3     3 f     0.183</code></pre>
</div>
</div>
</div><div class="column" style="width:60%;">
<div class="fragment">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-40"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-40" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-40-1" class="code-annotation-target"><a href="#annotated-cell-40-1" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span>, <span class="dv">2</span>]</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-40" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-40" data-code-lines="1" data-code-annotation="2">Select first row and second column</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  y    
  &lt;chr&gt;
1 a    </code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-42"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-42" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-42-1" class="code-annotation-target"><a href="#annotated-cell-42-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="fu">c</span>(<span class="st">"x"</span> , <span class="st">"y"</span>)]</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-42" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-42" data-code-lines="1" data-code-annotation="3">Select all rows and columns <code>x</code> and <code>y</code></span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
      x y    
  &lt;int&gt; &lt;chr&gt;
1     1 a    
2     2 e    
3     3 f    </code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-44"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-44-1" class="code-annotation-target"><a href="#annotated-cell-44-1" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>x <span class="sc">&gt;</span> <span class="dv">1</span>, ]</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-44" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="1" data-code-annotation="4">Select rows based on a logical condition (more on this in <a href="https://vsass.github.io/CSSS508/Lectures/Lecture4/CSSS508_Lecture4_index.html">Week 4</a>), i.e.&nbsp;where rows of <code>x</code> are greater than 1 and all columns</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
      x y         z
  &lt;int&gt; &lt;chr&gt; &lt;dbl&gt;
1     2 e     0.169
2     3 f     0.183</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="data.frame-vs.-tibble" class="level2">
<h2 class="anchored" data-anchor-id="data.frame-vs.-tibble"><code>data.frame()</code> vs.&nbsp;<code>tibble()</code></h2>
<p><span style="font-size: 85%;">Tibbles are the tidyverse version of a base <code>R</code> dataframe. Usually you can use them interchangably without issue but they have slightly different behavior that’s important to know about when indexing in this way.</span></p>
<p>. . .</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><span style="font-size: 85%;">If <code>df</code> is a data.frame, then <code>df[, cols]</code> will return a vector if <code>col</code> selects a single column and a data frame if it selects more than one column.</span></p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>df1[, <span class="st">"x"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><span style="font-size: 85%;">If <code>df</code> is a tibble, then <code>[</code> will always return a tibble.</span></p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>df2[, <span class="st">"x"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
      x
  &lt;int&gt;
1     1
2     2
3     3</code></pre>
</div>
</div>
</div>
</div>
<p>. . .</p>
<p><br>
</p>
<p><span style="font-size: 85%;">One way to avoid this ambiguity with <code>data.frames</code> is to explicitly specify <code>drop = FALSE</code>:</span></p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>df1[, <span class="st">"x"</span> , drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x
1 1
2 2
3 3</code></pre>
</div>
</div>
</section>
<section id="selecting-from-dataframes-with-and" class="level2">
<h2 class="anchored" data-anchor-id="selecting-from-dataframes-with-and">Selecting from dataframes with <code>[[</code> and <code>$</code></h2>
<p><code>[</code>, which selects many elements, is paired with <code>[[</code> and <code>$</code>, which extract a single element.</p>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>tb <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">21</span>)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>tb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
      x     y
  &lt;int&gt; &lt;dbl&gt;
1     1    10
2     2     4
3     3     1
4     4    21</code></pre>
</div>
</div>
</div><div class="column" style="width:60%;">
<div class="fragment">
<p><code>[[</code> can access by position or by name:</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-53"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-53" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-53-1" class="code-annotation-target"><a href="#annotated-cell-53-1" aria-hidden="true" tabindex="-1"></a>tb[[<span class="dv">1</span>]]</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-53" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-53" data-code-lines="1" data-code-annotation="1">By position</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-55"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-55" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-55-1" class="code-annotation-target"><a href="#annotated-cell-55-1" aria-hidden="true" tabindex="-1"></a>tb[[<span class="st">"x"</span>]]</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-55" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-55" data-code-lines="1" data-code-annotation="2">By name</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="annotated-cell-57"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-57" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-57-1" class="code-annotation-target"><a href="#annotated-cell-57-1" aria-hidden="true" tabindex="-1"></a>tb<span class="sc">$</span>x</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-57" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-57" data-code-lines="1" data-code-annotation="3"><code>$</code> is specialized for access by name</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>They can also be used to create new columns.</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>tb<span class="sc">$</span>z <span class="ot">&lt;-</span> tb<span class="sc">$</span>x <span class="sc">+</span> tb<span class="sc">$</span>y</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>tb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
      x     y     z
  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
1     1    10    11
2     2     4     6
3     3     1     4
4     4    21    25</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="getting-help" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="getting-help">Getting Help <span style="color:#99a486"><i class="fa-solid fa-scroll" aria-label="scroll"></i></span></h2>
<p>One of the most difficult things as a beginner in <code>R</code> (or any language tbh) is not always knowing what to ask to solve your issue. Being in this class is a great first step! Some other useful tools:</p>
<div class="incremental">
<ul class="incremental">
<li><strong>Google</strong>
<ul class="incremental">
<li>Adding <code>R</code> to your query is basic but useful and often overlooked. Including the package name, if you’re using one, is another. Finally, what is it you want to do? For example “R dplyr create new variable based on value of another.”</li>
<li>Copy and pasting error messages is also helpful!</li>
</ul></li>
<li><strong>StackOverflow</strong>
<ul class="incremental">
<li>Many of your Google queries will take you here anyways so you might try going directly to the source! Filter by <code>R</code> and make sure to include a <code>reprex</code> so people can actually understand what your issue is.</li>
</ul></li>
<li><strong>Reprex</strong>
<ul class="incremental">
<li>Short for minimal <code>repr</code>oducible <code>ex</code>ample this is a version of your code that someone could copy and run on their own machine, making it possible for them to help you troubleshoot your problem.</li>
<li>You want to strip away everything not pertinent to the issue you’re having so that it’s simple and straightforward.</li>
<li>You can use the <a href="https://reprex.tidyverse.org/"><code>reprex</code></a> package for assistance with this!<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></li>
</ul></li>
<li><strong>Putting in the work up front</strong>
<ul class="incremental">
<li>It’s cliché, but investing in your learning right now will pay off down the road.</li>
<li>Learning how to do something, why <code>R</code> works in a certain way, and developing practices that keep you organized will make you more efficient and help prevent minor and major frustrations going forward.</li>
</ul></li>
</ul>
</div>
</section>
</section>
<section id="homework" class="level1 section-title" data-background-color="#1e4655">
<h1 class="section-title" data-background-color="#1e4655">Homework</h1>
<section id="section-1" class="level2" data-menu-title="Homework 3" data-background-iframe="https://vsass.github.io/CSSS508/Homework/HW3/homework3.html" data-background-interactive="TRUE">
<h2 data-menu-title="Homework 3" data-background-iframe="https://vsass.github.io/CSSS508/Homework/HW3/homework3.html" data-background-interactive="TRUE" class="anchored" data-anchor-id="section-1"></h2>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>except for <code>^</code><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>A component of programming which allows us to break a problem into a number of steps, each of which is straightforward and easy to understand.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p> Python is equally well suited. Julia is an option as well.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>We’ll come back to this on the last week of class.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>A .qmd is one such example.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Usually contains all code, data, documentation, and outputs related to the project, allowing others to reproduce your analyses.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>A research compendium that includes a Dockerfile or container image so the full computational environment can be recreated, regardless of machine setup.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>This is an example of a <em>named</em> vector, where each element is given a name (LHS) associated with its value (RHS).<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p><code>dput()</code> is also a useful function for quickly creating a snippet of your data to share with others to illustrate your issue.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->

<script>
  // htmlwidgets need to know to resize themselves when slides are shown/hidden.
  // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
  // slide changes (different for each slide format).
  (function () {
    // dispatch for htmlwidgets
    function fireSlideEnter() {
      const event = window.document.createEvent("Event");
      event.initEvent("slideenter", true, true);
      window.document.dispatchEvent(event);
    }

    function fireSlideChanged(previousSlide, currentSlide) {
      fireSlideEnter();

      // dispatch for shiny
      if (window.jQuery) {
        if (previousSlide) {
          window.jQuery(previousSlide).trigger("hidden");
        }
        if (currentSlide) {
          window.jQuery(currentSlide).trigger("shown");
        }
      }
    }

    // hookup for slidy
    if (window.w3c_slidy) {
      window.w3c_slidy.add_observer(function (slide_num) {
        // slide_num starts at position 1
        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
      });
    }

  })();
</script>

<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Created with <a href="https://quarto.org/">Quarto</a> • <a href="https://creativecommons.org/licenses/by-nc/4.0/">License</a></p>
</div>   
    <div class="nav-footer-center">
<p>Copyright © 2023 Victoria Sass <br> Course content adapted from <a href="https://clanfear.github.io/CSSS508/">Chuck Lanfear</a> and <a href="https://pearce790.github.io/CSSS508/index.html">Michael Pearce</a></p>
</div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:vsass@uw.edu">
      <i class="bi bi-envelope-at" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://scholar.google.com/citations?user=A3lEdiIAAAAJ&amp;hl=en">
      <i class="bi bi-google" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/vsass">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="http://vsass.github.io/Sass_Victoria_CV_2023.pdf">
      <i class="bi bi-file-person" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>